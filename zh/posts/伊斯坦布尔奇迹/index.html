<!DOCTYPE html><html lang="en-US" ><title>ä¼Šæ–¯å¦å¸ƒå°”å¥‡è¿¹ | Wenxuan Zhao</title><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="ä¼Šæ–¯å¦å¸ƒå°”å¥‡è¿¹" /><meta name="author" content="èµµæ–‡è½©" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="2005å¹´æ¬§å† å†³èµ›ä¸‹åŠåœºå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿè¿™ç¯‡æ–‡ç« ç”¨Rè¯­è¨€æ­éœ²äº†é›†é”¦ä¸æ¯”èµ›æ²¡æœ‰å±•ç°çš„ç»†èŠ‚ã€‚" /><meta property="og:description" content="2005å¹´æ¬§å† å†³èµ›ä¸‹åŠåœºå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿè¿™ç¯‡æ–‡ç« ç”¨Rè¯­è¨€æ­éœ²äº†é›†é”¦ä¸æ¯”èµ›æ²¡æœ‰å±•ç°çš„ç»†èŠ‚ã€‚" /><link rel="canonical" href="https://allanware.github.io/zh/posts/%E4%BC%8A%E6%96%AF%E5%9D%A6%E5%B8%83%E5%B0%94%E5%A5%87%E8%BF%B9/" /><meta property="og:url" content="https://allanware.github.io/zh/posts/%E4%BC%8A%E6%96%AF%E5%9D%A6%E5%B8%83%E5%B0%94%E5%A5%87%E8%BF%B9/" /><meta property="og:site_name" content="Wenxuan Zhao" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-06-10T01:24:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="ä¼Šæ–¯å¦å¸ƒå°”å¥‡è¿¹" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"èµµæ–‡è½©"},"description":"2005å¹´æ¬§å† å†³èµ›ä¸‹åŠåœºå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿè¿™ç¯‡æ–‡ç« ç”¨Rè¯­è¨€æ­éœ²äº†é›†é”¦ä¸æ¯”èµ›æ²¡æœ‰å±•ç°çš„ç»†èŠ‚ã€‚","url":"https://allanware.github.io/zh/posts/%E4%BC%8A%E6%96%AF%E5%9D%A6%E5%B8%83%E5%B0%94%E5%A5%87%E8%BF%B9/","@type":"BlogPosting","headline":"ä¼Šæ–¯å¦å¸ƒå°”å¥‡è¿¹","dateModified":"2021-06-14T03:08:18+00:00","datePublished":"2021-06-10T01:24:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://allanware.github.io/zh/posts/%E4%BC%8A%E6%96%AF%E5%9D%A6%E5%B8%83%E5%B0%94%E5%A5%87%E8%BF%B9/"},"@context":"https://schema.org"}</script><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>ä¼Šæ–¯å¦å¸ƒå°”å¥‡è¿¹ | Wenxuan Zhao</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Wenxuan Zhao"><meta name="application-name" content="Wenxuan Zhao"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-Y7CDN6L98B"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-Y7CDN6L98B'); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"><ul><li class="nav-item"> <a href="/zh" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>ä¸»é¡µ</span> </a><li class="nav-item"> <a href="/zh/about/" class="nav-link"> <span>å…³äº</span> </a><li class="nav-item"> <a href="/zh/teaching/" class="nav-link"> <span>æ•™å­¦</span> </a><li class="nav-item"> <a href="/zh/archives/" class="nav-link"> <span>å†å²</span> </a><li class="nav-item"> <a href="/zh/tags/" class="nav-link"> <span>æ ‡ç­¾</span> </a></ul></div><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/Allanware" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['xiaodoubizwx','gmail.com'].join('@')" aria-label="email" class="order-4" > <i class="fas fa-envelope"></i> </a> <a href="https://www.linkedin.com/in/allan-wenxuan-zhao/" aria-label="linkedin" class="order-5" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-sun" dark-mode-invisible></i> <i class="mode-toggle fas fa-moon" light-mode-invisible></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG â€º <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> </span> <span id="breadcrumb"> <a href="/zh/posts/%E4%BC%8A%E6%96%AF%E5%9D%A6%E5%B8%83%E5%B0%94%E5%A5%87%E8%BF%B9/">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</a> <a href="/posts/The-Miracle-of-Istanbul/">ğŸ‡ºğŸ‡¸ English</a> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> æ–‡ç« </div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="æœç´¢..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel"> å–æ¶ˆ</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>ä¼Šæ–¯å¦å¸ƒå°”å¥‡è¿¹</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> èµµæ–‡è½© </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Jun 10, 2021, 1:24 AM +0000" prep="on" > Jun 10 <i class="unloaded">2021-06-10T01:24:00+00:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Jun 13, 2021, 8:08 PM -0700" prefix="Updated " > Jun 13 <i class="unloaded">2021-06-14T03:08:18+00:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="5827 words">32 min</span></div></div><div class="post-content"><h2 id="å¼•è¨€">å¼•è¨€</h2><p>2005å¹´5æœˆ25æ—¥ï¼Œæ¬§æ´²å† å†›è”èµ›å†³èµ›åœ¨ä¼Šæ–¯å¦å¸ƒå°”çš„é˜¿å¡”å›¾å°”å…‹å¥¥æ—åŒ¹å…‹ä½“è‚²åœºä¸¾è¡Œã€‚ ä½“è‚²åœºçš„ 65000 åè§‚ä¼—å’Œå…¨çƒæ•°äº¿çƒè¿·å³å°†è§è¯ä¸€åœºåæ¥è¢«ç§°ä¸º<strong>ä¼Šæ–¯å¦å¸ƒå°”å¥‡è¿¹</strong>çš„è¶³çƒæ¯”èµ›ã€‚ æ‰åæ¨ªæº¢çš„ACç±³å…°é˜Ÿåœ¨ç¬¬ä¸€åˆ†é’Ÿå°±ç”±é˜Ÿé•¿é©¬å°”è’‚å°¼å…ˆæ‹”å¤´ç­¹ï¼›åŠåœºç»“æŸå‰ï¼Œä»–ä»¬åˆè¿›äº†ä¸¤ä¸ªçƒï¼Œç›´åˆ° 3-0 é¢†å…ˆã€‚ æœ‰ä¼ è¨€è¯´ï¼Œç±³å…°é˜Ÿåœ¨ä¸­åœºä¼‘æ¯æ—¶å°±åœ¨æ›´è¡£å®¤é‡Œå¼€é¦™æ§Ÿä»¥åº†ç¥ä»–ä»¬å³å°†åœ¨ä¸‰å¹´å†…ç¬¬äºŒæ¬¡å¤ºå¾—æ¬§å† å† å†›ã€‚ ç„¶è€Œï¼Œä¸‹åŠåœºåˆ©ç‰©æµ¦å·åœŸé‡æ¥ï¼Œåœ¨æˆå‰§æ€§çš„6åˆ†é’Ÿå†…æ‰“è¿›3çƒï¼Œå°†æ¯”åˆ†æ‰³å¹³ä¸º 3-3ï¼Œ å¹¶åœ¨æ®‹é…·çš„ç‚¹çƒå¤§æˆ˜ä¸­ä»¥ 3-2 å‡»è´¥ç±³å…°ã€‚è‹±å›½è§£è¯´å‘˜åœ¨æ¯”èµ›ç»“æŸæ—¶è¯´ï¼šâ€œå¦‚æœè¿™éƒ½ä¸èƒ½è¯æ˜å‘½è¿å­˜åœ¨ï¼Œ é‚£ä¹ˆä»€ä¹ˆå¯ä»¥â€ã€‚å¯ä»¥è‚¯å®šçš„æ˜¯ï¼Œè¿™ä¸ªå²è¯—èˆ¬çš„é€†è½¬å¾ˆéš¾è¨€ä¼ ï¼Œä½†æˆ‘å°†å°è¯•ç”¨å¯è§†åŒ–æ¥å®Œæˆè¿™é¡¹å·¥ä½œï¼Œ å¹¶ä¸”å°è¯•å¼„æ¸…æ¥šè¿™ä¸€åˆ‡æ˜¯å¦‚ä½•å‘ç”Ÿçš„ã€‚</p><h3 id="å¼±è€…">å¼±è€…</h3><p>åˆ©ç‰©æµ¦é˜Ÿé•¿å²è’‚æ–‡Â·æ°æ‹‰å¾·åœ¨èµ›å‰å°†ä»–çš„çƒé˜Ÿç§°ä¸ºä¸å…¨æ˜æ˜Ÿç±³å…°é˜Ÿç›¸æ¯”çš„å¼±è€…ï¼Œè€Œä¸”ä»–æ˜¯å¯¹çš„ã€‚ æ ¹æ® transfermarkt.co.uk çš„æ•°æ®ï¼Œ</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1"># get the data for the miracle of istanbul</span><span class="w">
</span><span class="n">Matches</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">FreeMatches</span><span class="p">(</span><span class="n">FreeCompetitions</span><span class="p">())</span><span class="w">
</span><span class="n">istanbul</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">get.matchFree</span><span class="p">(</span><span class="n">Matches</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="n">Matches</span><span class="o">$</span><span class="n">match_id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2302764</span><span class="p">),])</span><span class="w">
</span><span class="n">milanLineup</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">istanbul</span><span class="p">[[</span><span class="m">24</span><span class="p">]][[</span><span class="m">1</span><span class="p">]]</span><span class="o">$</span><span class="n">player.name</span><span class="w">
</span><span class="n">liverpoolLineup</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">istanbul</span><span class="p">[[</span><span class="m">24</span><span class="p">]][[</span><span class="m">2</span><span class="p">]]</span><span class="o">$</span><span class="n">player.name</span><span class="w">
</span><span class="n">milanmv</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">13.5</span><span class="p">,</span><span class="w"> </span><span class="m">2.7</span><span class="p">,</span><span class="w"> </span><span class="m">9.0</span><span class="p">,</span><span class="w"> </span><span class="m">29.7</span><span class="p">,</span><span class="w"> </span><span class="m">2.7</span><span class="p">,</span><span class="w"> </span><span class="m">18.9</span><span class="p">,</span><span class="w"> </span><span class="m">22.5</span><span class="p">,</span><span class="w"> </span><span class="m">16.2</span><span class="p">,</span><span class="w"> </span><span class="m">23.4</span><span class="p">,</span><span class="w"> </span><span class="m">31.5</span><span class="p">,</span><span class="w"> </span><span class="m">13.5</span><span class="p">)</span><span class="w">
</span><span class="n">liverpoolmv</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">4.05</span><span class="p">,</span><span class="w"> </span><span class="m">3.6</span><span class="p">,</span><span class="w"> </span><span class="m">6.75</span><span class="p">,</span><span class="w"> </span><span class="m">6.08</span><span class="p">,</span><span class="w"> </span><span class="m">1.8</span><span class="p">,</span><span class="w"> </span><span class="m">13.5</span><span class="p">,</span><span class="w"> </span><span class="m">7.88</span><span class="p">,</span><span class="w"> </span><span class="m">27</span><span class="p">,</span><span class="w"> </span><span class="m">11.25</span><span class="p">,</span><span class="w"> </span><span class="m">11.7</span><span class="p">,</span><span class="w"> </span><span class="m">15.75</span><span class="p">)</span><span class="w">
</span><span class="n">mvSums</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Milan"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="p">),</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">milanmv</span><span class="p">),</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">liverpoolmv</span><span class="p">)))</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">RColorBrewer</span><span class="p">)</span><span class="w">
</span><span class="n">coul</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">suppressWarnings</span><span class="p">(</span><span class="n">brewer.pal</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="s2">"Set2"</span><span class="p">))</span><span class="w"> 
</span><span class="n">barplot</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="n">mvSums</span><span class="o">$</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">names</span><span class="o">=</span><span class="n">mvSums</span><span class="o">$</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="o">=</span><span class="n">coul</span><span class="p">,</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Market value of Starting XI"</span><span class="p">,</span><span class="w"> </span><span class="n">sub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"184M Â£ vs 109M Â£"</span><span class="p">,</span><span class="w"> </span><span class="n">ylab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"in million pounds"</span><span class="p">,</span><span class="w"> </span><span class="n">font.sub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-3-1.png" alt="" /></p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="n">mv</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">milanLineup</span><span class="p">,</span><span class="w"> </span><span class="n">liverpoolLineup</span><span class="p">),</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">milanmv</span><span class="p">,</span><span class="w"> </span><span class="n">liverpoolmv</span><span class="p">))</span><span class="w">
</span><span class="n">mvtop10</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">head</span><span class="p">(</span><span class="n">mv</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="o">-</span><span class="n">mv</span><span class="o">$</span><span class="n">value</span><span class="p">),</span><span class="w"> </span><span class="p">],</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">forcats</span><span class="p">)</span><span class="w">
</span><span class="n">mvtop10</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fct_reorder</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">ggplot</span><span class="p">(</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">value</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">stat</span><span class="o">=</span><span class="s2">"identity"</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="o">=</span><span class="s2">"#f68060"</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="o">=</span><span class="m">.6</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="o">=</span><span class="m">.4</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">coord_flip</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">xlab</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">theme_bw</span><span class="p">()</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-3-2.png" alt="" /></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç±³å…°é¦–å‘åä¸€äººçš„å¸‚å€¼æ˜æ˜¾é«˜äºåˆ©ç‰©æµ¦ã€‚å•ä»æ¯ä¸ªçƒå‘˜ä¸ªä½“è€Œè¨€ï¼Œ ç±³å…°çƒå‘˜åœ¨ä¸¤é˜Ÿé¦–å‘çƒå‘˜å¸‚å€¼æœ€é«˜çš„å‰ 10 åçƒå‘˜ä¸­å æ® 8 å¸­ã€‚é˜Ÿé•¿æ°æ‹‰å¾·å’Œå‰é”‹å·´ç½—æ–¯æ˜¯å”¯äºŒçš„ä¾‹å¤–ã€‚</p><p>ä»‹ç»å®ŒèƒŒæ™¯åï¼Œè®©æˆ‘ä»¬è¿›å…¥æ¯”èµ›ã€‚</p><h2 id="æ•°æ®">æ•°æ®</h2><h3 id="æ•°æ®é›†çš„æè¿°">æ•°æ®é›†çš„æè¿°</h3><p>è¯¥æ•°æ®é›†æ¥è‡ªè¶³çƒæ•°æ®åˆ†æå…¬å¸statsbombçš„å¼€æº github åº“ã€‚ä»–ä»¬å…¬å¼€äº† 878 ä¸ª JSON æ ¼å¼çš„æ•°æ®é›†ï¼Œ æ¯åœºæ¯”èµ›ä¸€ä¸ªæ•°æ®é›†ï¼Œä¹ŸåŒ…æ‹¬è¿™åœºã€‚æ¯ä¸ªæ•°æ®é›†éƒ½åŒ…å«æ•°åƒä¸ªäº‹ä»¶ï¼Œæ¯ä¸ªäº‹ä»¶ç”±å¤§çº¦ 100 ä¸ªæˆ–æ›´å¤šçš„å˜é‡æ‰€æè¿°ã€‚</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">dim</span><span class="p">(</span><span class="n">istanbul</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>## [1] 4648  126
</pre></table></code></div></div><p>è®°å½•ä¼Šæ–¯å¦å¸ƒå°”å¥‡è¿¹çš„æ•°æ®é›†æœ‰ 4648 ä¸ªäº‹ä»¶ï¼Œæ¯ä¸ªäº‹ä»¶ç”± 126 ä¸ªå˜é‡æè¿°ã€‚</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">head</span><span class="p">(</span><span class="n">colnames</span><span class="p">(</span><span class="n">istanbul</span><span class="p">),</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>##  [1] "id"             "index"          "period"         "timestamp"     
##  [5] "minute"         "second"         "possession"     "duration"      
##  [9] "related_events" "location"
</pre></table></code></div></div><p>ä¸Šé¢æ˜¾ç¤ºäº†æè¿°æ¯ä¸ªäº‹ä»¶çš„å‰ 10 ä¸ªå˜é‡ã€‚ç¬¬ä¸€ä¸ªå˜é‡<code class="language-plaintext highlighter-rouge">id</code>æ˜¯æ¯ä¸ªäº‹ä»¶çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼› <code class="language-plaintext highlighter-rouge">period</code>è¡¨ç¤ºæ­¤äº‹ä»¶å‘ç”Ÿçš„æ—¶é—´æ®µï¼ˆä¾‹å¦‚ 1 = ä¸ŠåŠåœºï¼‰ï¼›<code class="language-plaintext highlighter-rouge">timestamp</code>è®°å½•æ¯ä¸ªäº‹ä»¶çš„ç¡®åˆ‡æ—¶é—´ï¼› <code class="language-plaintext highlighter-rouge">location</code>æ˜¯å¦ä¸€ä¸ªé‡è¦çš„å˜é‡ï¼Œè®°å½•äº‹ä»¶çš„åæ ‡ä¿¡æ¯ï¼ˆå³åœºä¸Šä½ç½®ï¼‰ã€‚å› æ­¤ï¼Œä¸€ä¸ªç¤ºä¾‹äº‹ä»¶æ˜¯ï¼š çƒå‘˜ x åœ¨æ—¶é—´ 00:31:52.716 ä»¥ y çš„è§’åº¦åœ¨çƒåœºåæ ‡ (24, 40) å¤„ä¼ äº†ä¸€ä¸ªåŠé«˜çƒâ€¦â€¦ã€‚ éšç€æ–‡ç« çš„æ·±å…¥ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å’Œå¯è§†åŒ–æ›´å¤šæœ‰è¶£çš„å˜é‡ã€‚</p><h3 id="æ•°æ®é›†çš„ç‰¹å¾">æ•°æ®é›†çš„ç‰¹å¾</h3><ul><li>æ•°æ®é›†éå¸¸ç¨€ç–ï¼ˆå¾ˆå¤š NULL æˆ– NA å€¼ï¼‰ã€‚è¿™æ˜¯æœ‰é“ç†çš„ï¼Œå› ä¸ºåœ¨ä¸€ä¸ªæ—¶é—´ç‚¹ï¼Œ åªæœ‰ä¸€åçƒå‘˜èƒ½å¤Ÿåšä¸€ä¸ªåŠ¨ä½œã€‚ä¾‹å¦‚ï¼Œ <code class="language-plaintext highlighter-rouge">dribble_nutmeg</code>è¿™ä¸ªå˜é‡åªæœ‰åœ¨æŸä¸ªçƒå‘˜ç©¿äº†å¦å¤–ä¸€ä¸ªçƒå‘˜è£†ï¼ˆå¥½ç—›ï¼ï¼‰çš„æ—¶å€™æ‰æœ‰å€¼ï¼ˆä¸æ˜¯ NAï¼‰ã€‚</ul><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">length</span><span class="p">(</span><span class="n">which</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">istanbul</span><span class="o">$</span><span class="n">dribble.nutmeg</span><span class="p">)))</span><span class="w">
</span></pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>## [1] 4
</pre></table></code></div></div><p>120 åˆ†é’Ÿå†…ï¼ˆ90 åˆ†é’Ÿå¸¸è§„æ—¶é—´åŠ ä¸Š 30 åˆ†é’ŸåŠ æ—¶ï¼‰å‘ç”Ÿäº† 4 æ¬¡ç©¿è£†ï¼Œä¸åï¼</p><ul><li>æˆ‘ä»¬éœ€è¦ç‰¹åˆ«æ³¨æ„<code class="language-plaintext highlighter-rouge">location</code>å˜é‡ã€‚<code class="language-plaintext highlighter-rouge">location</code>è¡¨ç¤ºæ¯ä¸ªäº‹ä»¶å‘ç”Ÿæ—¶çš„åœºä¸Šåæ ‡ï¼Œ è€Œåæ ‡çš„é»˜è®¤å°ºå¯¸ä¸º 120 * 80ã€‚ä½†æ˜¯ï¼Œè¶³çƒåœºå¤§å°å„ä¸ç›¸åŒï¼Œé˜¿å¡”å›¾å°”å…‹å¥¥æ—åŒ¹å…‹ä½“è‚²åœºçš„å°ºå¯¸ä¸º 105 ç±³ * 68 ç±³ã€‚æˆ‘ä»¬éœ€è¦å°†åæ ‡ä»ç›¸å¯¹ä½ç½®ç¼©æ”¾åˆ°å®é™…è·ç¦»ï¼ˆç±³ï¼‰ï¼Œä»¥ä¾¿äº‹ä»¶æ˜¾ç¤ºåœ¨æˆ‘åé¢ç»˜åˆ¶çš„çƒåœºçš„æ­£ç¡®ä½ç½®ä¸Šã€‚</ul><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="n">location.x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">location.y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">istanbul</span><span class="p">))</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="n">nrow</span><span class="p">(</span><span class="n">istanbul</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="w"> </span><span class="nf">is.null</span><span class="p">(</span><span class="n">istanbul</span><span class="o">$</span><span class="n">location</span><span class="p">[[</span><span class="n">i</span><span class="p">]]))</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">location.x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">istanbul</span><span class="o">$</span><span class="n">location</span><span class="p">[[</span><span class="n">i</span><span class="p">]][</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">105</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">120</span><span class="w">
    </span><span class="n">location.y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">istanbul</span><span class="o">$</span><span class="n">location</span><span class="p">[[</span><span class="n">i</span><span class="p">]][</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">68</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">80</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="n">istanbul</span><span class="o">$</span><span class="n">location.x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">location.x</span><span class="w">
</span><span class="n">istanbul</span><span class="o">$</span><span class="n">location.y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">location.y</span><span class="w">
</span></pre></table></code></div></div><h2 id="æ¯”èµ›æ—¶é—´çº¿">æ¯”èµ›æ—¶é—´çº¿</h2><p>ä¸ºäº†å¼„æ¸…æ¥šæ¯”èµ›æ˜¯å¦‚ä½•æ¼”å˜çš„ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“æ¯”èµ›çš„é‡è¦æ—¶é—´ç‚¹ã€‚ä¸€åœºæ¯”èµ›çš„æ—¶é—´çº¿æ˜¯ç”±ä¸€ç³»åˆ—å…³é”®äº‹ä»¶ç»„æˆçš„ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œè¿™äº›äº‹ä»¶åŒ…æ‹¬æ¯”èµ›å¼€å§‹ã€è¿›çƒã€ä¸ŠåŠåœºç»“æŸã€ä¸‹åŠåœºå¼€å§‹ã€å‡ºç¤ºï¼ˆçº¢é»„ï¼‰ç‰Œã€æ¢äººã€ä»¥åŠç‚¹çƒã€‚</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre><span class="c1"># get the goals and penalties  </span><span class="w">
</span><span class="n">goalEvents</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">istanbul</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="n">istanbul</span><span class="o">$</span><span class="n">shot.outcome.id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">97</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">istanbul</span><span class="o">$</span><span class="n">shot.type.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Penalty"</span><span class="p">),</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="c1"># get the subs</span><span class="w">
</span><span class="n">subEvents</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">istanbul</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">istanbul</span><span class="o">$</span><span class="n">substitution.outcome.name</span><span class="p">)),</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="c1"># get the cards </span><span class="w">
</span><span class="n">cardEvents</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">istanbul</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">istanbul</span><span class="o">$</span><span class="n">foul_committed.card.name</span><span class="p">)),</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="n">keyEvents</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rbind</span><span class="p">(</span><span class="n">goalEvents</span><span class="p">,</span><span class="w"> </span><span class="n">subEvents</span><span class="p">,</span><span class="w"> </span><span class="n">cardEvents</span><span class="p">)</span><span class="w">
</span><span class="c1"># Format the data to conform to timevis </span><span class="w">
</span><span class="n">contents</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"First half"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Second half"</span><span class="p">,</span><span class="w"> </span><span class="s2">"1st half extra"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2nd half extra"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Penalty shootout"</span><span class="p">)</span><span class="w">
</span><span class="n">contents</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span><span class="w"> </span><span class="s2">"yellow card"</span><span class="p">,</span><span class="w"> </span><span class="s2">"yellow card"</span><span class="p">)</span><span class="w">
</span><span class="n">contents</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span><span class="w"> </span><span class="s2">"Kewell out, Smicer in"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Finnan out, Hamann in"</span><span class="p">,</span><span class="w"> </span><span class="s2">"3-1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"3-2"</span><span class="p">,</span><span class="w"> </span><span class="s2">" 3-3"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Baros out, Cisse in"</span><span class="p">,</span><span class="w"> </span><span class="s2">"O"</span><span class="p">,</span><span class="s2">"O"</span><span class="p">,</span><span class="w"> </span><span class="s2">"X"</span><span class="p">,</span><span class="s2">"O"</span><span class="p">)</span><span class="w">
</span><span class="n">contents</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span><span class="w"> </span><span class="s2">"1-0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2-0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"3-0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Crespo out, Tomasson in"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Seedorf out, Serginho in"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Gattuso out, Rui Costa in"</span><span class="p">,</span><span class="w"> </span><span class="s2">"X"</span><span class="p">,</span><span class="w">  </span><span class="s2">"X"</span><span class="p">,</span><span class="w"> </span><span class="s2">"O"</span><span class="p">,</span><span class="w">  </span><span class="s2">"O"</span><span class="p">,</span><span class="w">  </span><span class="s2">"X"</span><span class="p">)</span><span class="w">
</span><span class="n">contents</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span><span class="w"> </span><span class="s2">"Timeout"</span><span class="p">)</span><span class="w">
</span><span class="n">start</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"2005-5-25 19:45:00"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 20:45:00"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 21:30:00"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 21:45:00"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:00:00"</span><span class="p">)</span><span class="w">
</span><span class="c1"># liverpool</span><span class="w">
</span><span class="n">start</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 21:15:28"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 21:19:58"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 20:07:00"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 20:45:00"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 20:53:04"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 20:55:02"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 20:59:52"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 21:24:28"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:00:50"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:02:37"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:04:11"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:05:44"</span><span class="p">)</span><span class="w">
</span><span class="c1"># Milan</span><span class="w">
</span><span class="n">start</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 19:45:51"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 20:23:12"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 20:27:57"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 21:24:50"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 21:25:05"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 21:51:20"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:00:02"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:01:40"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:03:17"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:05:03"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:06:24"</span><span class="p">)</span><span class="w">
</span><span class="n">start</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 20:30:00"</span><span class="p">)</span><span class="w">
</span><span class="n">end</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"2005-5-25 20:30:00"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 21:30:00"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 21:45:00"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:00:00"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:07:00"</span><span class="p">,</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="m">23</span><span class="p">),</span><span class="w"> </span><span class="s2">"2005-5-25 20:45:00"</span><span class="p">)</span><span class="w">
</span><span class="n">group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="nf">rep</span><span class="p">(</span><span class="s2">"time"</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">),</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="s2">"Liverpool"</span><span class="p">,</span><span class="w"> </span><span class="m">12</span><span class="p">),</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="s2">"Milan"</span><span class="p">,</span><span class="w"> </span><span class="m">11</span><span class="p">),</span><span class="w"> </span><span class="kc">NA</span><span class="p">)</span><span class="w">
</span><span class="n">style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="nf">rep</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">),</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="s2">"color:yellow;"</span><span class="p">,</span><span class="m">2</span><span class="p">),</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">),</span><span class="w"> </span><span class="s2">"color:red;"</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">),</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="s2">"color:red;"</span><span class="p">,</span><span class="m">2</span><span class="p">),</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="s2">"color:red;"</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">)</span><span class="w">
</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">contents</span><span class="p">,</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">end</span><span class="p">,</span><span class="w"> </span><span class="n">group</span><span class="p">,</span><span class="w"> </span><span class="n">style</span><span class="p">)</span><span class="w">

</span><span class="n">timevisDataGroups</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="w">
  </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"time"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Milan"</span><span class="p">),</span><span class="w">
  </span><span class="n">content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Time"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Milan"</span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">timevis</span><span class="p">)</span><span class="w">
</span><span class="n">timevis</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">timevisDataGroups</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/timeline.png" alt="" /></p><p>æ€»ç»“ä¸€ä¸‹ä¸Šé¢çš„æ—¶é—´è¡¨ã€‚ä¸ŠåŠåœºï¼Œç±³å…°åœ¨æ¯”èµ›å¼€å§‹æ—¶å°±ç«‹å³å–å¾—è¿›çƒï¼Œå¹¶åœ¨ä¸ŠåŠåœºå¿«ç»“æŸæ—¶åˆæ‰“å…¥ä¸¤çƒã€‚å¦ä¸€æ–¹é¢ï¼Œåˆ©ç‰©æµ¦åœ¨ä¸ŠåŠåœºå› ä¼¤æ¢äººã€‚ä¸‹åŠåœºå¼€å§‹å‰ï¼Œåˆ©ç‰©æµ¦å·²ç» 3-0 è½åï¼Œè€Œä¸”è¢«è¿«ï¼ˆéæˆ˜æœ¯æ„å›¾ï¼‰ç”¨äº† 1 æ¬¡æ¢äººã€‚ä¸‹åŠåœºå¼€å§‹ï¼Œåˆ©ç‰©æµ¦åˆæ¢äººã€‚è¿™æ¬¡æ¢äººæ˜¯ç”±äºåˆ©ç‰©æµ¦ä¸»å¸…çš„æˆ˜æœ¯è€ƒè™‘ï¼Œè¯•å›¾æ‰­è½¬å±€é¢ï¼Œè€Œä¸”ç¡®å®åšåˆ°äº†ã€‚çº¦ 10 åˆ†é’Ÿåï¼Œåˆ©ç‰©æµ¦æ‰“è¿›é¦–çƒï¼Œå°†æ¯”åˆ†æ‰³ä¸º 3-1ï¼Œå¹¶ä¸”åœ¨ 6 åˆ†é’Ÿçš„ç¥å¥‡è¡¨ç°ä¸­ï¼Œä»–ä»¬ä¸€å…±æ‰“è¿› 3 çƒï¼Œå°†æ¯”åˆ†æ‰³æˆ3-3ã€‚ä¸¤é˜Ÿåœ¨æ¯”èµ›çš„åæœŸé¢éƒ½æ²¡æœ‰å†è¿›çƒã€‚æœ€ååˆ©ç‰©æµ¦åœ¨ç‚¹çƒå¤§æˆ˜ä¸­ 3-2 å‡»è´¥äº†ç±³å…°ï¼ˆå›¾ä¸­çš„çº¢Xä»£è¡¨ç‚¹çƒç½šå¤±ï¼Œåœ†åœˆä»£è¡¨ç½šè¿›ï¼‰ã€‚</p><p>é€šè¿‡è¿™ä¸ªæ—¶é—´è¡¨ï¼Œæ‰€æœ‰çš„å…³é”®äº‹ä»¶éƒ½è¢«æ¸…æ™°åœ°å±•ç¤ºå‡ºæ¥äº†ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°å¥½çš„è§’åº¦æ¥è§£é‡Šæˆ‘ä»¬çš„é—®é¢˜ï¼Œå³å¥‡è¿¹æ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼š</p><ul><li>6 åˆ†é’Ÿå†…æ‰“è¿› 3 ä¸ªçƒï¼é‚£ 6 åˆ†é’Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ<li>ä»æŸç§æ„ä¹‰ä¸Šæ¥è¯´ï¼Œè¿›çƒåˆ†å¸ƒç›¸å½“â€œå‡åŒ€â€ï¼Œç±³å…°ä¸ŠåŠåœºè¿› 3 çƒï¼Œåˆ©ç‰©æµ¦ä¸‹åŠåœºè¿› 3 çƒã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ</ul><p>ä»æ—¶é—´è¡¨ä¸­çªå‡ºçš„å¦ä¸€ä»¶äº‹æ˜¯æ•´åœºæ¯”èµ›è£åˆ¤åªå‡ºç¤ºäº† 2 å¼ é»„ç‰Œï¼ˆå…¨éƒ¨æ¥è‡ªåˆ©ç‰©æµ¦ï¼‰å¹¶ä¸”æ²¡æœ‰çº¢ç‰Œã€‚è¿™å¯¹äºä¸€åœºè¶³çƒæ¯”èµ›æ¥è¯´æ˜¯æå…¶ç½•è§çš„ï¼Œå°¤å…¶æ˜¯æ¬§å† å†³èµ›ã€‚è¿™æ˜¯ä¸€å¹´ä¸­æœ€å¤§çš„ä¸€åœºæ¯”èµ›ã€‚è¿™æ˜¾ç¤ºäº†ä¸¤æ”¯çƒé˜Ÿæ˜¯å¦‚ä½•ä¸“æ³¨äºç§¯æåœ°æ¯”èµ›ï¼Œè€Œä¸æ˜¯è¢«åŠ¨åœ°æ¯”èµ›ï¼ˆé€šè¿‡çŠ¯è§„æ¥é˜»æ­¢å¯¹æ–¹çš„æ¯”èµ›ï¼‰ã€‚è¿™ç¡®å®æ˜¯ä¸€æ¬¾æµç•…ä¸”é«˜è´¨é‡çš„æ¯”èµ›ï¼Œè€Œä¸”å…·æœ‰æˆå‰§æ€§ã€‚</p><h2 id="å¤©å ‚æˆ–åœ°ç‹±">å¤©å ‚æˆ–åœ°ç‹±</h2><p>æ­£å¦‚æ—¶é—´è¡¨æ‰€å»ºè®®çš„é‚£æ ·ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ä¸ŠåŠåœºå’Œä¸‹åŠåœºä¹‹é—´çš„åŒºåˆ«ã€‚æ¯æ”¯çƒé˜Ÿéƒ½åœ¨ä¸€ä¸ªåŠåœºè¿›äº† 3 ä¸ªçƒï¼Œè€Œå¦ä¸€æ”¯çƒé˜Ÿåˆ™æœªè¿›ä¸€çƒã€‚å…·ä½“æ¥è¯´ï¼Œä¸ŠåŠåœºæ˜¯ç±³å…°çš„å¤©å ‚ï¼Œåˆ©ç‰©æµ¦çš„åœ°ç‹±ï¼›ä¸‹åŠåœºä¸ä¸ŠåŠåœºå®Œå…¨ç›¸åã€‚æˆ‘ä»¬èƒ½å¯è§†åŒ–å¤©å ‚ä¸åœ°ç‹±ä¹‹é—´çš„åŒºåˆ«å—ï¼Ÿ</p><h3 id="å°„é—¨">å°„é—¨</h3><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tibble</span><span class="o">::</span><span class="n">as_tibble</span><span class="p">(</span><span class="n">istanbul</span><span class="p">)</span><span class="w">
</span><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">46</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">soccerShotmap</span><span class="p">(</span><span class="n">theme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"dark"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-9-1.png" alt="" /></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸ŠåŠåœºç±³å…° 8 æ¬¡å°„é—¨ï¼ˆä¸Šå›¾ 8 ä¸ªç‚¹ï¼‰ï¼Œåˆ©ç‰©æµ¦ 5 æ¬¡ã€‚ä¸è¿‡ï¼Œç±³å…°çš„å¤§éƒ¨åˆ†å°„é—¨ï¼ˆ 8 æ¬¡ä¸­æœ‰ 6 æ¬¡ï¼‰éƒ½åœ¨ç¦åŒºå†…ï¼Œè€Œåˆ©ç‰©æµ¦åªæœ‰ 2 æ¬¡.</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">minute</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">45</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">90</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">soccerShotmap</span><span class="p">(</span><span class="n">theme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"dark"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-10-1.png" alt="" /></p><p>åœ¨ä¸‹åŠåœºï¼Œæˆ‘ä»¬é¢„è®¡åˆ©ç‰©æµ¦ä¼šåœ¨å°„é—¨å’Œç¦åŒºå†…å°„é—¨è¿™ä¸€é¡¹ä¸­å æ®ä¸»å¯¼åœ°ä½ã€‚ç›¸åï¼Œç±³å…°åœ¨å°„é—¨æ¬¡æ•°å’Œç¦åŒºå°„é—¨æ¬¡æ•°ä¸Šä»å ä¸»å¯¼åœ°ä½ã€‚åˆ©ç‰©æµ¦ç¦åŒºå†…ä»… 2 æ¬¡å°„é—¨å°±å…¨éƒ¨å…¥ç½‘ï¼Œåˆ©ç‰©æµ¦è¿˜æ‰“è¿›äº†ä¸€ä¸ªè¿œå°„ã€‚ç±³å…°ç¦åŒºå†… 6 æ¬¡å°„é—¨ï¼Œç¦åŒºå¤– 6 æ¬¡ï¼Œå´æ— ä¸€æˆåŠŸã€‚</p><p>è®©æˆ‘ä»¬çœ‹çœ‹åŠ æ—¶èµ›é‡Œä¸¤é˜Ÿå°„é—¨çš„å¯¹æ¯”ã€‚</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">minute</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">90</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">120</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">soccerShotmap</span><span class="p">(</span><span class="n">theme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"dark"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-11-1.png" alt="" /></p><p>ä»¤äººåƒæƒŠçš„æ˜¯ï¼ˆä¹Ÿè®¸åœ¨çœ‹åˆ°æ¯”èµ›ä¸‹åŠåœºçš„å°„é—¨åå¹¶ä¸é‚£ä¹ˆä»¤äººæƒŠè®¶ï¼‰ï¼Œåˆ©ç‰©æµ¦æ²¡æœ‰æœºä¼šå°è¯•ä»»ä½•å°„é—¨ï¼Œç±³å…°åˆå°„é—¨ 7 æ¬¡ï¼Œå…¶ä¸­ 3æ¬¡åœ¨ç¦åŒºå†…ï¼Œå¹¶ä¸” 1 æ¬¡é è¿‘çƒé—¨æŸ±ï¼ˆå·®ä¸€ç‚¹ï¼ï¼‰ã€‚ç„¶è€Œï¼Œç±³å…°ä¸€çƒæœªè¿›ã€‚</p><h3 id="ä¼ çƒ">ä¼ çƒ</h3><p>ä¼ çƒæ˜¯è¶³çƒæ¯”èµ›çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚é€šè¿‡çœ‹ä¼ çƒçš„ä½ç½®ï¼ˆå¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°çƒçš„ä½ç½®å’Œçƒå‘˜çš„ç«™ä½ã€‚</p><h4 id="ä¸ŠåŠåœº">ä¸ŠåŠåœº</h4><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"AC Milan"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">24</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">soccerPassmap</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"lightblue"</span><span class="p">,</span><span class="w"> </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w">
                </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Milan's passing map in the 1st half"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-12-1.png" alt="" /> <em>å›¾ä¸€</em></p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"AC Milan"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">24</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">soccerPassmap</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"lightblue"</span><span class="p">,</span><span class="w"> </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w">
                </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Milan's passing map in the 1st half (25' onwards)"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-12-2.png" alt="" /> <em>å›¾äºŒ</em></p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">soccerPassmap</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"lightblue"</span><span class="p">,</span><span class="w"> </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w">
                </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Liverpool's passing map in the 1st half"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-12-3.png" alt="" /> <em>å›¾ä¸‰</em></p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">soccerPassmap</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"lightblue"</span><span class="p">,</span><span class="w"> </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w">
                </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Liverpool's passing map in the 1st half (25' onwards)"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-12-4.png" alt="" /> <em>å›¾å››</em></p><p>æˆ‘ä»¬å¯ä»¥å°†ä¸ŠåŠåœºåˆ†æˆä¸¤åŠã€‚<strong>å›¾ä¸€</strong> æ˜¯ACç±³å…°çš„åœ¨å‰ 24 åˆ†é’Ÿä¼ çƒåœ°å›¾ï¼Œçš®å°”æ´›ä½äºå›¾çš„ä¸­å¿ƒï¼ˆå›¾ä¸­çš„æœ€å¤§è“ç‚¹ï¼‰ï¼Œç±³å…°çš„ç”±å®ˆè½¬æ”»ä»¥åŠç”±æ”»è½¬å®ˆéƒ½ä¾èµ–äºä»–ã€‚å¦ä¸€ä»¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç±³å…°å‰é”‹å…‹é›·æ–¯æ³¢è¿™æ—¶å¹¶æ²¡æœ‰çœŸæ­£å‚ä¸æ¯”èµ›ã€‚<strong>å›¾äºŒ</strong> æ˜¯ 24 åˆ†é’Ÿä»¥åä¸ŠåŠåœºç»“æŸå‰ç±³å…°çš„ä¼ çƒå›¾ã€‚ä¸ç¬¬ä¸€å¼ å›¾ç›¸æ¯”ï¼Œç±³å…°çš„é˜µå‹å‘é—¨å‰æ”¶ç¼©äº†ã€‚æ¯”å¦‚åœ¨å‰ 24 åˆ†é’Ÿï¼Œé©¬å°”è’‚å°¼ï¼ˆå·¦åå«ï¼‰ã€åŠ å›¾ç´¢ã€è¥¿å¤šå¤«éƒ½ç«™åœ¨çš®å°”æ´›çš„èº«å‰ï¼›è€Œåœ¨ä¸ŠåŠåœºç¬¬äºŒé˜¶æ®µä»–ä»¬éƒ½ä½äºçš®å°”æ´›èº«åã€‚æˆ‘çŒœæƒ³è¿™æ˜¯å› ä¸ºä»–ä»¬æ—©æ—©å°±ä»¥ 1-0 é¢†å…ˆï¼Œå› æ­¤åˆ©ç‰©æµ¦å¢åŠ äº†çš„ä¾µç•¥æ€§ï¼Œä»¥åŠç±³å…°å®æ–½äº†æ”¶ç¼©é˜²çº¿å’Œåå‡»çš„ç­–ç•¥ã€‚è¿™ä¸ªç­–ç•¥ç®€ç›´å¤ªæ£’äº†ï¼ä»–ä»¬åœ¨åˆ©ç‰©æµ¦éå¸¸åŠªåŠ›åœ°è¿›æ”»æ—¶ï¼ˆå› ä¸ºä»–ä»¬ä»¥ 1-0 è½åï¼Œ åœ¨ 39â€™ å’Œ 44â€™ çš„åå‡»ä¸­åˆè¿›äº†ä¸¤ä¸ªçƒã€‚ä¸¤ä¸ªè¿›çƒçš„å¾—åˆ†æ‰‹éƒ½æ˜¯å…‹é›·æ–¯æ³¢ï¼Œä»–åœ¨å‰ 24 åˆ†é’Ÿçš„ä¼ çƒä¸­æ²¡æœ‰â€œå‚ä¸â€ï¼Œåœ¨ä¸ŠåŠåœºç¬¬äºŒé˜¶æ®µå´å˜å¾—è‡´å‘½ã€‚</p><p><strong>å›¾ä¸‰å›¾å››</strong>æ˜¯ä¸ŠåŠåœºåˆ©ç‰©æµ¦çš„ä¼ çƒå›¾ã€‚é¦–å…ˆè¦æ³¨æ„çš„æ˜¯ï¼Œç§‘å¨å°”ä¸‹åœºäº†ï¼ˆå—ä¼¤ç¦»åœºï¼‰ï¼Œæ–¯ç±³åˆ‡å°”æ›¿è¡¥å‡ºåœºï¼ˆç§‘å¨å°”åœ¨ç¬¬ä¸‰å¼ å›¾ä½†ä¸åœ¨ç¬¬å››å¼ ï¼Œè€Œæ–¯ç±³åˆ‡å°”åˆ™ç›¸åï¼‰ã€‚è€Œç¬¬å››å¼ å’Œç¬¬ä¸‰å¼ å¯¹æ¯”ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ°æ‹‰å¾·å’Œæ¡‘æ–¯åœ¨å‘å‰æ¨è¿›å¹¶å‘ä¸­è·¯é æ‹¢ï¼Œè€Œä¸¤åè¾¹é”‹é‡Œç‘Ÿå’Œæ–¯ç±³åˆ‡å°”çš„ä½ç½®ä¸ä¸ŠåŠåœºç¬¬ä¸€é˜¶æ®µï¼ˆæ–¯ç±³åˆ‡å°”çš„ä¹‹å‰æ˜¯ç§‘å¨å°”ï¼‰å¤§è‡´ç›¸åŒã€‚</p><h4 id="ç¥å¥‡çš„6åˆ†é’Ÿ">ç¥å¥‡çš„6åˆ†é’Ÿ</h4><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"AC Milan"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">53</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">60</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">soccerPassmap</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"lightblue"</span><span class="p">,</span><span class="w"> </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w">
                </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Milan's passing map in the 6 minute spell"</span><span class="p">,</span><span class="w"> </span><span class="n">minPass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-13-1.png" alt="" /> <em>å›¾ä¸€</em></p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">passMap</span><span class="p">(</span><span class="n">is</span><span class="p">,</span><span class="w"> </span><span class="s2">"AC Milan"</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">54</span><span class="p">,</span><span class="w"> </span><span class="m">60</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-13-2.png" alt="" /> <em>å›¾äºŒ</em></p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">53</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;=</span><span class="m">60</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">soccerPassmap</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"lightblue"</span><span class="p">,</span><span class="w"> </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w">
                </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Liverpool's passing map in the 6 minute spell"</span><span class="p">,</span><span class="w"> </span><span class="n">minPass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-13-3.png" alt="" /> <em>å›¾ä¸‰</em></p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">passMap</span><span class="p">(</span><span class="n">is</span><span class="p">,</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">54</span><span class="p">,</span><span class="w"> </span><span class="m">60</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-13-4.png" alt="" /> <em>å›¾å››</em></p><p>æˆ‘ä»¬å·²ç»çœ‹è¿‡äº†åˆ©ç‰©æµ¦çš„åœ°ç‹±ï¼Œå³åœ¨ä¸ŠåŠåœºä¸­ç±³å…°æ—©æ—©é¢†å…ˆå¹¶ä¸”åˆ©ç”¨åå‡»åˆè¿›äº†ä¸¤çƒï¼Œè€Œåˆ©ç‰©æµ¦åˆ™åœ¨è¿›æ”»ä¸­æŒ£æ‰ã€‚ç„¶è€Œï¼Œæ­£å¦‚æ—¶é—´è¡¨æ‰€æ˜¾ç¤ºçš„é‚£æ ·ï¼Œåœ¨æ¯”èµ›çš„ä¸‹åŠåœºï¼Œåœ¨ 6 åˆ†é’Ÿé‡Œåˆ©ç‰©æµ¦æ‰“è¿›äº†3çƒæ‰³å¹³äº†æ¯”åˆ†ã€‚è¿™ç¥å¥‡çš„ 6 åˆ†é’ŸçœŸå¯è°“æ˜¯åˆ©ç‰©æµ¦å’Œåˆ©ç‰©æµ¦çƒè¿·çš„å¤©å ‚ã€‚è¿™ä¹‹é—´å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿè®©æˆ‘ä»¬çœ‹çœ‹è¿™ 6 åˆ†é’Ÿé‡Œå‘ç”Ÿçš„æ‰€æœ‰ä¼ çƒã€‚<strong>å›¾ä¸€</strong>ï¼šç±³å…°ä¼ çƒ 27 æ¬¡ï¼Œä¼ çƒå®Œæˆç‡ä¸åˆ° 60%ã€‚ç±³å…°åªæœ‰ 8 åçƒå‘˜å‚ä¸äº†ä¸€æ¬¡æˆ–å¤šæ¬¡ä¼ çƒã€‚å¦‚æœæˆ‘ä»¬ä»”ç»†çœ‹ï¼Œ<strong>å›¾äºŒ</strong> æ˜¾ç¤ºç±³å…°ä»é˜²å®ˆåˆ°ä¸­åœºï¼Œä»¥åŠä»ä¸­åœºä¼ åˆ°è¿›æ”»çº¿çš„ä¼ çƒå…¨éƒ½å¤±è´¥äº†ï¼ˆçº¢è‰²ï¼šå¤±è´¥ï¼Œè“è‰²ï¼šæˆåŠŸï¼‰ã€‚</p><p>ç›¸åï¼Œ<strong>å›¾ä¸‰</strong>æ˜¾ç¤ºï¼Œåˆ©ç‰©æµ¦çš„ 10 åçƒå‘˜ï¼ˆä¸åŒ…æ‹¬å®ˆé—¨å‘˜ï¼‰å…¨éƒ¨å‚ä¸ä¼ çƒï¼Œä¼ çƒå‡†ç¡®ç‡éƒ½è¾¾åˆ°äº† 75% ä»¥ä¸Šã€‚<strong>å›¾å››</strong>æ˜¾ç¤ºäº†ä»–ä»¬ä¹‹é—´çš„ä¼ çƒã€‚</p><p>åœ¨ä¸ŠåŠåœºï¼Œç±³å…°çš„ä¼ çƒå‡†ç¡®ç‡ä¸º 78%ã€‚æ˜¯ä»€ä¹ˆå¯¼è‡´ç±³å…°æ–¹é¢çš„ä¼ çƒå‡†ç¡®ç‡å’Œä¼ çƒæ¬¡æ•°çš„ä¸‹é™ï¼Œè€Œåˆ©ç‰©æµ¦å´ä»¥æŸç§æ–¹å¼ä¿æŒäº†ä»–ä»¬çš„ä¼ çƒå‡†ç¡®ç‡ï¼Ÿè®©æˆ‘ä»¬çœ‹çœ‹ä¸¤é˜Ÿåœ¨è¿™ 6 åˆ†é’Ÿçš„é˜²å®ˆè¡¨ç°ã€‚</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="n">d2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">filter</span><span class="p">(</span><span class="n">type.name</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Interception"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Block"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Dispossessed"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Ball Recovery"</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">54</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">60</span><span class="p">)</span><span class="w">

</span><span class="n">soccerPitch</span><span class="p">(</span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w"> 
            </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="p">,</span><span class="w"> 
            </span><span class="n">subtitle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Defensive actions"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_point</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d2</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location.x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location.y</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">type.name</span><span class="p">),</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-14-1.png" alt="" /> <em>å›¾ä¸€</em></p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="n">d2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">filter</span><span class="p">(</span><span class="n">type.name</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="w"> </span><span class="s2">"Interception"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Block"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Dispossessed"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Ball Recovery"</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"AC Milan"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">54</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">60</span><span class="p">)</span><span class="w">

</span><span class="n">soccerPitch</span><span class="p">(</span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w"> 
            </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Milan"</span><span class="p">,</span><span class="w"> 
            </span><span class="n">subtitle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Defensive actions"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_point</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d2</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location.x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location.y</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">type.name</span><span class="p">),</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-14-2.png" alt="" /> <em>å›¾äºŒ</em></p><p><strong>å›¾ä¸€</strong>æ˜¯åˆ©ç‰©æµ¦çƒå‘˜åœ¨è¿™ 6 åˆ†é’Ÿåšçš„é˜²å®ˆåŠ¨ä½œã€‚ä»¤äººå’‹èˆŒçš„æ˜¯ï¼Œä»–ä»¬ç«Ÿç„¶åšåˆ°äº† 7 æ¬¡æŠ¢æ–­ï¼Œä»è€Œå¯¼è‡´ç±³å…°ä¼ çƒå‡†ç¡®ç‡ä¸‹é™ã€‚<strong>å›¾äºŒ</strong>åˆ™æ˜¯ç±³å…°çš„é˜²å®ˆåŠ¨ä½œï¼Œä»…ä»…åªæœ‰ 1 æ¬¡å¤ºå›çƒæƒï¼Œå‡ ä¹æ²¡æœ‰å½±å“åˆ°åˆ©ç‰©æµ¦çš„æ§çƒã€‚</p><h3 id="åœºä¸Šä½ç½®">åœºä¸Šä½ç½®</h3><p>ä¹‹å‰æˆ‘ä»¬å·²ç»é€šè¿‡ä¼ çƒå›¾çœ‹åˆ°äº†ä¸€äº›çƒå‘˜åœ¨åœºä¸Šçš„ä½ç½®ï¼Œæ¯”å¦‚æˆ‘ä»¬çœ‹åˆ°ä¸ŠåŠåœºç±³å…°ä¸€æ–¹åœ¨é¢†å…ˆåæ”¶ç¼©é˜²çº¿ã€‚é€šè¿‡ä¸‹é¢çš„å¯è§†åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ›´å¤šå…³äºæ•´ä¸ªçƒé˜Ÿï¼ˆçƒé˜Ÿé˜µå‹çš„å˜åŒ–ï¼‰å’Œä¸ªåˆ«å…³é”®çƒå‘˜çš„ä½ç½®å˜åŒ–ã€‚</p><h4 id="ä¸ŠåŠåœº-1">ä¸ŠåŠåœº</h4><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">location.x</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"AC Milan"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">soccerPositionMap</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"player.name"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"location.x"</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"location.y"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">fill1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"blue"</span><span class="p">,</span><span class="w"> </span><span class="n">theme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"grass"</span><span class="p">,</span><span class="w"> </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AC Milan"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">subtitle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Average position (1st half)"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-15-1.png" alt="" /> <em>å›¾ä¸€</em></p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">location.x</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">25</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">soccerPositionMap</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"player.name"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"location.x"</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"location.y"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">fill1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"blue"</span><span class="p">,</span><span class="w"> </span><span class="n">theme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"grass"</span><span class="p">,</span><span class="w"> </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">subtitle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Average position (1st half)"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-15-2.png" alt="" /> <em>å›¾äºŒ</em></p><p><strong>å›¾ä¸€</strong>æ˜¯ç±³å…°åœ¨ä¸ŠåŠåœºçš„å¹³å‡ä½ç½®ã€‚å¹³å‡ä½ç½®æ˜¯çƒå‘˜é‡‡å–ä»»ä½•åŠ¨ä½œæ—¶çš„å¹³å‡åæ ‡ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¼ çƒã€‚æ­£å¦‚æˆ‘ä»¬æ‰€è§ï¼Œç±³å…°çš„é˜µå‹æ”¶ç¼©åœ¨ä¸­åœºä¸­å¤®é™„è¿‘ã€‚é™¤äº† 4 åä¸­åœºçƒå‘˜å¤–ï¼Œå…¶ä¸­ä¸€åå‰é”‹å…‹é›·æ–¯æ³¢ä¹Ÿæ¥è¿‘ä¸­åœºã€‚å‡ºäºæŸç§åŸå› ï¼Œä»–ä»¬åœ¨ä¸­å¿ƒé å¾—å¾ˆè¿‘ï¼ˆåé¢ä¼šè§£é‡Šï¼‰ã€‚</p><p><strong>å›¾äºŒ</strong>ä¸­ï¼Œåˆ©ç‰©æµ¦åœ¨ä¸ŠåŠåœºçš„é˜µå‹æ˜¯æ¯”è¾ƒåˆ†æ•£çš„ï¼Œæ¯”è¾ƒæ³¨é‡åœºä¸Šå®½åº¦ã€‚è¿™æ˜¯ç”±äºä»–ä»¬åœ¨è¾¹è·¯æ‰“è¾¹çš„æˆ˜æœ¯ã€‚æ°æ‹‰å¾·å’Œå¥¥æ‹‰è¯ºæ˜¯åŒä¸­åœºã€‚ç„¶è€Œï¼Œä»–ä»¬çš„è¾¹è·¯è¿›æ”»å¹¶ä¸é¡ºåˆ©ï¼Œæ‰€ä»¥ç±³å…°å†³å®šä¸æŠŠå¤ªå¤šçš„çƒå‘˜æ”¾åœ¨è¾¹ä¸Šï¼ˆå¦‚å›¾1æ‰€ç¤ºï¼‰ï¼Œè€Œæ˜¯é›†ä¸­ç«åŠ›è¿›æ”»åœ¨ä¸­è·¯è¿›æ”»å’Œä¹‹åçš„åå‡»ã€‚</p><h4 id="ä¸ŠåŠåœºå‰15åˆ†é’Ÿ">ä¸ŠåŠåœºå‰15åˆ†é’Ÿ</h4><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">filter</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">location.x</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"AC Milan"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">60</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">soccerPositionMap</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"player.name"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"location.x"</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"location.y"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">fill1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"blue"</span><span class="p">,</span><span class="w"> </span><span class="n">theme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"grass"</span><span class="p">,</span><span class="w"> </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AC Milan"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">subtitle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Average position (2nd half)"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-16-1.png" alt="" /> <em>å›¾ä¸€</em></p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">location.x</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">60</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">soccerPositionMap</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"player.name"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"location.x"</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"location.y"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">fill1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"blue"</span><span class="p">,</span><span class="w"> </span><span class="n">theme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"grass"</span><span class="p">,</span><span class="w"> </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">subtitle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Average position (2nd half)"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-16-2.png" alt="" /> <em>å›¾äºŒ</em></p><p>å½“åˆ©ç‰©æµ¦ 3-0 è½ååï¼Œåˆ©ç‰©æµ¦åšå‡ºäº†æˆ˜æœ¯è°ƒæ•´ï¼šåœ¨ä¸‹åŠåœºå¼€å§‹æ—¶ç”¨å“ˆæ›¼æ¢ä¸‹å³åå«èŠ¬å—ï¼ˆå› æ­¤æ”¾å¼ƒäº†è¾¹è·¯è¿›æ”»æˆ˜æœ¯ã€‚ç»“æœæˆ‘ä»¬å¤§å®¶éƒ½çŸ¥é“äº†ã€‚åœ¨<strong>å›¾äºŒ</strong>ï¼Œå“ˆæ›¼æ¥æ›¿äº†æ°æ‹‰å¾·ä¸ŠåŠåœºçš„ä½ç½®ï¼Œå¹¶é‡Šæ”¾æ°æ‹‰å¾·ã€‚é€šè¿‡ç‰ºç‰²å³åå«ï¼Œåˆ©ç‰©æµ¦å°†ä»–ä»¬çš„é˜µå‹æŒ¤å‘ä¸­è·¯ã€‚æ°æ‹‰å¾·å’Œæ¡‘æ–¯ã€å·´ç½—æ–¯ä¸€èµ·ï¼Œä¸æ–­åœ°å†²å‘ç±³å…°çš„ç¦åŒºå¹¶ä¸”ä¸éœ€è¦æ‹…å¿ƒè‡ªå·±çš„èº«åï¼Œå› ä¸ºå“ˆæ›¼åœ¨èº«åè´Ÿè´£é˜²å®ˆã€‚ç„¶åBoomï¼æ°æ‹‰å¾·é€šè¿‡ç¦åŒºå†…å¤´çƒæ”»é—¨æ‰“è¿›äº†ç¬¬ä¸€ä¸ªè¿›çƒï¼Œå¹¶åˆ›é€ äº†ä¸€ä¸ªç‚¹çƒï¼ˆåæ¥è½¬æ¢ä¸ºç¬¬ 3 ä¸ªè¿›çƒï¼‰ã€‚</p><h2 id="ç»“è®º">ç»“è®º</h2><p>æœ‰äº›äººå¯èƒ½ä¼šè¯´æ²¡æœ‰å¿…è¦å°†è¶³çƒæ¯”èµ›å¯è§†åŒ–ï¼Œå› ä¸ºå®ƒæœ¬èº«å°±æ˜¯ä¸€ç§è§†è§‰è‰ºæœ¯/è¿åŠ¨ã€‚æˆ‘å¿…é¡»åŒæ„ï¼Œå› ä¸ºæˆ‘æ˜¯ä¸€åè¶³çƒè¿·ï¼Œå¹¶ä¸”åœ¨è§‚çœ‹æ¯”èµ›æ—¶æœ‰å¾ˆå¤šå¿«ä¹å’Œç—›è‹¦ï¼Œè¯•å›¾å¯è§†åŒ–ä¸€ä¸ªå¥‡è¿¹æ›´æ˜¯å›°éš¾ã€‚ä½†æ˜¯æˆ‘è¿˜æ˜¯è¿™æ ·åšäº†ï¼Œå› ä¸ºç”¨æ¢ç´¢æ€§æ•°æ®åˆ†æï¼ˆExploratory data analysisï¼‰æ¥åˆ†æè¶³çƒæ¯”èµ›å¯ä»¥å®ç°ä»¥ä¸‹ç›®æ ‡ï¼š</p><ol><li>æä¾›ä¸€ä¸ªè§†è§‰æ€§çš„æ‘˜è¦ã€‚åœ¨æ™®é€šæ¯”èµ›ä¸­ï¼Œçƒè¿·é€šè¿‡ç°åœºç”»é¢çš„åŠ¨ä½œæ¥è§‚å¯Ÿçƒå‘˜çš„åŠ¨ä½œã€‚ä»–ä»¬çš„è®°å¿†åŠ›ä¸è¶³ä»¥è®°ä½æ‰€æœ‰å†…å®¹ï¼Œä¹Ÿæ²¡æœ‰æ—¶é—´æ€»ç»“è¿™äº›ä¿¡æ¯ï¼Œå› ä¸ºä»–ä»¬å¤ªä¸“æ³¨äºæ¯”èµ›æœ¬èº«ã€‚æ¯”èµ›ç»“æŸåï¼Œçƒè¿·ä¼šçœ‹åˆ°å¾ˆå¤šå…³äºæ¯”èµ›çš„ç»Ÿè®¡æ•°æ®ï¼Œæ¯”å¦‚å°„é—¨æ¬¡æ•°ã€æ§çƒç‡ã€ä¼ çƒæ¬¡æ•°ã€ä¼ çƒå‡†ç¡®ç‡ç­‰ï¼Œè¿™äº›æ•°æ®æœ¬èº«å…¶å®æ²¡æœ‰å¤šå¤ªå¤§æ„ä¹‰ï¼Œç”šè‡³ä¸å…·æœ‰å¯æ¯”æ€§ã€‚ä¸€æ–¹åœ¨ä¸€åœºæ¯”èµ›ä¸­æ‹¥æœ‰ 65% çš„æ§çƒç‡ä¸å¦ä¸€æ”¯çƒé˜Ÿåœ¨å¦ä¸€åœºæ¯”èµ›ä¸­æ‹¥æœ‰ 65% çš„æ§çƒç‡ä¸åŒã€‚å»é—®é—®å·´è¨çƒè¿·å§ã€‚ä»–ä»¬çš„çƒé˜Ÿæ›¾ç»æ‹¥æœ‰ 65% çš„æ§çƒç‡å¹¶æœ€ç»ˆèµ¢å¾—äº†æ‰€æœ‰å¥–æ¯ï¼Œè€Œç°åœ¨ä»¥ç›¸åŒçš„æ§çƒç‡å´ä¸€æ— æ‰€è·ã€‚åƒè¿™æ ·çš„å¯è§†åŒ–å¯ä»¥å°†è§†è§‰éƒ¨åˆ†ä¸æ‘˜è¦éƒ¨åˆ†ç»“åˆèµ·æ¥ï¼Œä»è€Œç»™çƒè¿·å¸¦æ¥æ›´æŠ•å…¥æ›´å…·æ´å¯ŸåŠ›çš„è§’åº¦æ¥ç†è§£æ¯”èµ›ã€‚<li>æä¾›ä¸€ä¸ªå»ºç«‹è¶³çƒæ¯”èµ›æ¨¡å‹çš„å¾ˆå¥½çš„èµ·ç‚¹ã€‚éšç€æ•°æ®ç§‘å­¦çš„è¿›æ­¥ï¼Œè¿«åˆ‡éœ€è¦æœ‰å…³è¶³çƒæ¯”èµ›çš„æ¨¡å‹ã€‚ä¸€ä¸ªçªå‡ºçš„ä¾‹å­æ˜¯æ ¹æ®è¶³çƒæ¯”èµ›çš„æ•°æ®ï¼ˆäº‹ä»¶ä»¥åŠæè¿°äº‹ä»¶çš„å˜é‡ï¼‰é¢„æµ‹é¢„æœŸè¿›çƒï¼ˆexpected goal)çš„æ¨¡å‹ã€‚æ­¤è¿‡ç¨‹éå¸¸é€‚åˆï¼š<ol><li><em>çœ‹åˆ°</em> æ•°æ®æœ¬èº«ä»¥åŠå‘ç°æ•°æ®çš„ç‰¹ç‚¹ã€‚åœ¨è¿™ä¸ªæ•°æ®é›†ä¸­ï¼Œé‡Œé¢æœ‰å¾ˆå¤šNone/NAå€¼ä»¥åŠé‡Œé¢çš„ä½ç½®ä¿¡æ¯æ˜¯ä¸å®é™…åœºåœ°ä¸åŒ¹é…çš„ï¼Œæ‰€ä»¥æˆ‘é€šè¿‡è¿™ä¸ªè¿‡ç¨‹å‘ç°äº†é—®é¢˜å¹¶è§£å†³äº†é—®é¢˜ã€‚<li>å¯è§†åŒ–èƒ½å¤Ÿå¯¼è‡´è¿›çƒçš„å…³é”®äº‹ä»¶ã€‚<li>å‘ç°å¯ä»¥ç»§ç»­æ·±æŒ–çš„æ–¹å‘ã€‚æ¯”å¦‚æˆ‘åœ¨EDAçš„è¿‡ç¨‹ä¸­å‘ç°äº†åˆ©ç‰©æµ¦çš„ç¥å¥‡ 6 åˆ†é’Ÿï¼Œè¿™å¯èƒ½æ˜¯å€¼å¾—æ¢ç´¢çš„æ–¹å‘ä¹‹ä¸€ã€‚</ol></ol><p>å­¦åˆ°çš„ä¸»è¦ç»éªŒ: è¿™æ— ç–‘æ˜¯ä¸€ä¸ªå¥‡è¿¹ï¼Œå› ä¸ºï¼š</p><ol><li>è¶…çº§æˆå‰§åŒ–ã€‚åˆ©ç‰©æµ¦ä»…ç»Ÿæ²»äº†æ¯”èµ› 6 åˆ†é’Ÿï¼Œå´æœ€ç»ˆæ‰“è¿› 3 çƒã€‚ç±³å…°ç»Ÿæ²»äº† 114 åˆ†é’Ÿï¼ŒåŒ…æ‹¬åŠ æ—¶èµ› 7 æ¬¡å°„é—¨ï¼Œå´åœ¨ä¸ŠåŠåœºåä¸€çƒæœªè¿›ã€‚å°„é—¨æ•ˆç‡çš„ä½ä¸‹å½±å“äº†ä»–ä»¬åœ¨æœ€åçš„ç‚¹çƒå¤§æˆ˜ä¸­çš„å¿ƒæ€ï¼Œ5ç½šä»…ä»…2ä¸­ã€‚è€Œæœå¾·å…‹ï¼ˆåˆ©ç‰©æµ¦çš„å®ˆé—¨å‘˜ï¼‰åœ¨ç¬¬ 117 åˆ†é’Ÿå¯¹èˆç”«ç´ç§‘çš„æ‰‘æ•‘åˆ™è¢«è¯„ä¸ºæœ‰å²ä»¥æ¥æœ€ä¼Ÿå¤§çš„æ¬§å† æ—¶åˆ»ã€‚<li>æˆå‰§æ€§çš„æ‰³å¹³èƒŒåçš„ä¸€äº›åŸå› ã€‚ç”±äºå“ˆæ›¼çš„ä¸Šåœºï¼Œæ°æ‹‰å¾·å¾—ä»¥è‡ªç”±è¿›æ”»ã€‚ç±³å…°ä¸ŠåŠåœºçš„æˆåŠŸä¹Ÿå¾—ç›Šäºé˜µå‹å› ç´ ï¼šç±³å…°ç´§å®çš„ä¸­åœº vs åˆ©ç‰©æµ¦æ¾æ•£åœ¨ä¸¤è¾¹ã€‚<li>äººçš„å› ç´ ã€‚è¿™æ˜¯å¯è§†åŒ–çš„å›°éš¾éƒ¨åˆ†ã€‚ç±³å…°æ–¹é¢çš„å¿ƒç†å˜åŒ–ï¼Œä»ç‹‚å–œåˆ°æ€€ç–‘ï¼Œæœ€ååˆ°ææƒ§ã€‚å½“ä»–ä»¬åå¤è¿›æ”»ä½†ä¸€æ— æ‰€è·æ—¶ï¼Œä»–ä»¬çš„å¿ƒæ€å‘ç”Ÿäº†å˜åŒ–ã€‚åœ¨å¦ä¸€è¾¹ï¼Œæ°æ‹‰å¾·å’Œä»–å¯¹æ•´ä¸ªçƒé˜Ÿçš„å½±å“ã€‚</ol><h2 id="å¼•ç”¨">å¼•ç”¨</h2><h3 id="æ•°æ®-1">æ•°æ®</h3><ul><li>Statsbomb</ul><h3 id="å¯è§†åŒ–råŒ…">å¯è§†åŒ–RåŒ…</h3><ul><li>soccermatics<li>ggplot2</ul><h2 id="æˆ‘çš„rç¯å¢ƒ">æˆ‘çš„Rç¯å¢ƒ</h2><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">sessionInfo</span><span class="p">()</span><span class="w">
</span></pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre>## R version 4.1.0 (2021-05-18)
## Platform: x86_64-apple-darwin20.4.0 (64-bit)
## Running under: macOS Big Sur 11.4
## 
## Matrix products: default
## BLAS:   /usr/local/Cellar/openblas/0.3.15_1/lib/libopenblasp-r0.3.15.dylib
## LAPACK: /usr/local/Cellar/r/4.1.0/lib/R/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] parallel  stats     graphics  grDevices utils     datasets  methods  
## [8] base     
## 
## other attached packages:
##  [1] forcats_0.5.1      RColorBrewer_1.1-2 soccermatics_0.9.4 StatsBombR_0.1.0  
##  [5] tidyr_1.1.3        sp_1.4-5           purrr_0.3.4        jsonlite_1.7.2    
##  [9] httr_1.4.2         doParallel_1.0.16  iterators_1.0.13   foreach_1.5.1     
## [13] RCurl_1.98-1.3     rvest_1.0.0        tibble_3.1.2       stringr_1.4.0     
## [17] stringi_1.6.2      dplyr_1.0.6        ggplot2_3.3.3     
## 
## loaded via a namespace (and not attached):
##  [1] zoo_1.8-9         tidyselect_1.1.1  xfun_0.23         lattice_0.20-44  
##  [5] colorspace_2.0-1  vctrs_0.3.8       generics_0.1.0    htmltools_0.5.1.1
##  [9] yaml_2.2.1        utf8_1.2.1        rlang_0.4.11      R.oo_1.24.0      
## [13] pillar_1.6.1      glue_1.4.2        withr_2.4.2       R.utils_2.10.1   
## [17] tweenr_1.0.2      plyr_1.8.6        lifecycle_1.0.0   munsell_0.5.0    
## [21] gtable_0.3.0      SDMTools_1.1-221  R.methodsS3_1.8.1 codetools_0.2-18 
## [25] evaluate_0.14     knitr_1.33        fansi_0.5.0       xts_0.12.1       
## [29] Rcpp_1.0.6        scales_1.1.1      farver_2.1.0      ggforce_0.3.3    
## [33] digest_0.6.27     ggrepel_0.9.1     polyclip_1.10-0   grid_4.1.0       
## [37] cowplot_1.1.1     tools_4.1.0       bitops_1.0-7      magrittr_2.0.1   
## [41] crayon_1.4.1      pkgconfig_2.0.3   ellipsis_0.3.2    MASS_7.3-54      
## [45] xml2_1.3.2        rmarkdown_2.8     R6_2.5.0          compiler_4.1.0
</pre></table></code></div></div><h2 id="æºä»£ç ">æºä»£ç </h2><ul><li><a href="https://github.com/Allanware/Allanware.github.io/blob/master/_source/2021-03-04-The-Miracle-of-Istanbul.Rmd">https://github.com/Allanware/Allanware.github.io/blob/master/_source/2021-03-04-The-Miracle-of-Istanbul.Rmd</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/%E8%B6%B3%E7%90%83/" class="post-tag no-text-decoration" >è¶³çƒ</a> <a href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/" class="post-tag no-text-decoration" >å¯è§†åŒ–</a> <a href="/tags/r%E8%AF%AD%E8%A8%80/" class="post-tag no-text-decoration" >Rè¯­è¨€</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="share-wrapper"> <span class="share-label text-muted mr-1">åˆ†äº«</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=ä¼Šæ–¯å¦å¸ƒå°”å¥‡è¿¹ - Wenxuan Zhao&url=https://allanware.github.io/zh/posts/%E4%BC%8A%E6%96%AF%E5%9D%A6%E5%B8%83%E5%B0%94%E5%A5%87%E8%BF%B9/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=ä¼Šæ–¯å¦å¸ƒå°”å¥‡è¿¹ - Wenxuan Zhao&u=https://allanware.github.io/zh/posts/%E4%BC%8A%E6%96%AF%E5%9D%A6%E5%B8%83%E5%B0%94%E5%A5%87%E8%BF%B9/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=ä¼Šæ–¯å¦å¸ƒå°”å¥‡è¿¹ - Wenxuan Zhao&url=https://allanware.github.io/zh/posts/%E4%BC%8A%E6%96%AF%E5%9D%A6%E5%B8%83%E5%B0%94%E5%A5%87%E8%BF%B9/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>æœ€è¿‘æ›´æ–°</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/zh/posts/%E4%BC%8A%E6%96%AF%E5%9D%A6%E5%B8%83%E5%B0%94%E5%A5%87%E8%BF%B9/">ä¼Šæ–¯å¦å¸ƒå°”å¥‡è¿¹</a></ul></div><div id="access-tags"> <span>æµè¡Œæ ‡ç­¾</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/football/">football</a> <a class="post-tag" href="/tags/r/">r</a> <a class="post-tag" href="/tags/r%E8%AF%AD%E8%A8%80/">Rè¯­è¨€</a> <a class="post-tag" href="/tags/soccer/">soccer</a> <a class="post-tag" href="/tags/visualization/">visualization</a> <a class="post-tag" href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/">å¯è§†åŒ–</a> <a class="post-tag" href="/tags/%E8%B6%B3%E7%90%83/">è¶³çƒ</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">å†…å®¹</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>é˜…è¯»æ›´å¤š</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/The-Miracle-of-Istanbul/"><div class="card-body"> <span class="timeago small" > Mar 5 <i class="unloaded">2021-03-05T06:33:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>The Miracle of Istanbul</h3><div class="text-muted small"><p> Introduction On May 25th 2005, the 2005 UEFA Champions league final took place at the AtatÃ¼rk Olympic Stadium in Istanbul. 65000 audiences at the stadium and hundreds of millions of fans worldwide...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/The-Miracle-of-Istanbul/" class="btn btn-outline-primary" prompt="ä¸Šä¸€ç¯‡"><p>The Miracle of Istanbul</p></a> <span class="btn btn-outline-primary disabled" prompt="ä¸‹ä¸€ç¯‡"><p>-</p></span></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//allanware-github-io.disqus.com/embed.js', disqusConfig: function() { this.page.title = 'ä¼Šæ–¯å¦å¸ƒå°”å¥‡è¿¹'; this.page.url = 'https://allanware.github.io/zh/posts/%E4%BC%8A%E6%96%AF%E5%9D%A6%E5%B8%83%E5%B0%94%E5%A5%87%E8%BF%B9/'; this.page.identifier = '/zh/posts/%E4%BC%8A%E6%96%AF%E5%9D%A6%E5%B8%83%E5%B0%94%E5%A5%87%E8%BF%B9/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> Â© 2021 <a href="https://github.com/Allanware">èµµæ–‡è½©</a>.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/football/">football</a> <a class="post-tag" href="/tags/r/">r</a> <a class="post-tag" href="/tags/r%E8%AF%AD%E8%A8%80/">Rè¯­è¨€</a> <a class="post-tag" href="/tags/soccer/">soccer</a> <a class="post-tag" href="/tags/visualization/">visualization</a> <a class="post-tag" href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/">å¯è§†åŒ–</a> <a class="post-tag" href="/tags/%E8%B6%B3%E7%90%83/">è¶³çƒ</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://allanware.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
