<!--
  The Top Bar
-->

<div id="topbar-wrapper" class="row justify-content-center topbar-down">
  <div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between">
    {% assign paths = page.url | split: '/' %}
    
    <span id="breadcrumb">
  
    </span>
    <span id="breadcrumb">
      <!-- about and teaching pages  -->
      {% if page.layout == "page" %}
       
        {% assign pages = site.tabs | concat: site.zhtabs | where:"lang-id", page.lang-id | sort: "lang" | reverse %}
        
        {% if pages.size > 1 %} 
          {% for post in pages %}
            <a href="{{ site.base-url }}{{ post.url }}">{{ site.data.languages[post.lang].icon }} {{ site.data.languages[post.lang].label }}</a>
          {% endfor %}
        {% endif %} 
      <!-- archives page  -->
      {% elsif page.lang-id == "Archives" %}
       
        {% assign pages = site.tabs | concat: site.zhtabs | where:"lang-id", "Archives" | sort: "lang" | reverse %}
      
        {% if pages.size > 1 %} 
          {% for post in pages %}
            <a href="{{ site.base-url }}{{ post.url }}">{{ site.data.languages[post.lang].icon }} {{ site.data.languages[post.lang].label }}</a>
          {% endfor %}
        {% endif %} 

      <!-- tags page -->
      {% elsif page.lang-id == "Tags" %}
       
        {% assign pages = site.tabs | concat: site.zhtabs | where:"lang-id", "Tags" | sort: "lang" | reverse %}
      
        {% if pages.size > 1 %} 
          {% for post in pages %}
            <a href="{{ site.base-url }}{{ post.url }}">{{ site.data.languages[post.lang].icon }} {{ site.data.languages[post.lang].label }}</a>
          {% endfor %}
        {% endif %} 
      
      <!-- index page  -->
      {% elsif page.lang-id == "Index" %}
       
        {% assign pages = site.pages | where:"lang-id", "Index" | sort: "lang" | reverse %}
      
        {% if pages.size > 1 %} 
          {% for post in pages %}
            <a href="{{ site.base-url }}{{ post.url }}">{{ site.data.languages[post.lang].icon }} {{ site.data.languages[post.lang].label }}</a>
          {% endfor %}
        {% endif %} 
      
      <!-- all posts -->
      {% elsif page.layout == "post" %}
       
        {% assign pages = site.posts | where:"lang-id", page.lang-id | sort: "lang" | reverse %}
      
        {% if pages.size > 1 %} 
          {% for post in pages %}
            <a href="{{ site.base-url }}{{ post.url }}">{{ site.data.languages[post.lang].icon }} {{ site.data.languages[post.lang].label }}</a>
          {% endfor %}
        {% endif %} 
      {% endif %}

    </span>

    <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i>

    <div id="topbar-title">
      {% if page.layout == 'home' %}
        {{- site.title -}}
      {% elsif page.dynamic_title %}
        {{- page.title -}}
      {% else %}
        {{- page.layout | capitalize -}}
      {% endif %}
    </div>

    <i id="search-trigger" class="fas fa-search fa-fw"></i>
    <span id="search-wrapper" class="align-items-center">
      <i class="fas fa-search fa-fw"></i>
      <input class="form-control" id="search-input" type="search"
        aria-label="search" autocomplete="off" placeholder="{{ site.data.translations[site.data.label.search_hint][page.lang] | default: 'Search' }}...">
      <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i>
    </span>
    <span id="search-cancel" >Cancel</span>
  </div>

</div>
