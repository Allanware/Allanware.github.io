<!DOCTYPE html><html lang="en-US" ><title>The Miracle of Istanbul | Wenxuan Zhao</title><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="The Miracle of Istanbul" /><meta name="author" content="Wenxuan Zhao" /><meta property="og:locale" content="en_US" /><meta name="description" content="What happened in the 2nd half of the 2005 Champions League final, compared to the 1st half? This post uses R to expose details that the highlights and/or the match itself ignored." /><meta property="og:description" content="What happened in the 2nd half of the 2005 Champions League final, compared to the 1st half? This post uses R to expose details that the highlights and/or the match itself ignored." /><link rel="canonical" href="https://allanware.github.io/posts/The-Miracle-of-Istanbul/" /><meta property="og:url" content="https://allanware.github.io/posts/The-Miracle-of-Istanbul/" /><meta property="og:site_name" content="Wenxuan Zhao" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-03-05T06:33:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="The Miracle of Istanbul" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Wenxuan Zhao"},"description":"What happened in the 2nd half of the 2005 Champions League final, compared to the 1st half? This post uses R to expose details that the highlights and/or the match itself ignored.","url":"https://allanware.github.io/posts/The-Miracle-of-Istanbul/","@type":"BlogPosting","headline":"The Miracle of Istanbul","dateModified":"2021-06-14T03:08:18+00:00","datePublished":"2021-03-05T06:33:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://allanware.github.io/posts/The-Miracle-of-Istanbul/"},"@context":"https://schema.org"}</script><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>The Miracle of Istanbul | Wenxuan Zhao</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Wenxuan Zhao"><meta name="application-name" content="Wenxuan Zhao"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-Y7CDN6L98B"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-Y7CDN6L98B'); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"><ul><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <span>ABOUT</span> </a><li class="nav-item"> <a href="/teaching/" class="nav-link"> <span>TEACHING</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <span>TAGS</span> </a></ul></div><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/Allanware" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['xiaodoubizwx','gmail.com'].join('@')" aria-label="email" class="order-4" > <i class="fas fa-envelope"></i> </a> <a href="https://www.linkedin.com/in/allan-wenxuan-zhao/" aria-label="linkedin" class="order-5" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-sun" dark-mode-invisible></i> <i class="mode-toggle fas fa-moon" light-mode-invisible></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> </span> <span id="breadcrumb"> <a href="/zh/posts/%E4%BC%8A%E6%96%AF%E5%9D%A6%E5%B8%83%E5%B0%94%E5%A5%87%E8%BF%B9/">🇨🇳 中文</a> <a href="/posts/The-Miracle-of-Istanbul/">🇺🇸 English</a> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel"> Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>The Miracle of Istanbul</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Wenxuan Zhao </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Mar 5, 2021, 6:33 AM +0000" prep="on" > Mar 5 <i class="unloaded">2021-03-05T06:33:00+00:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Jun 13, 2021, 8:08 PM -0700" prefix="Updated " > Jun 13 <i class="unloaded">2021-06-14T03:08:18+00:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="4069 words">22 min</span></div></div><div class="post-content"><h2 id="introduction">Introduction</h2><p>On May 25th 2005, the 2005 UEFA Champions league final took place at the Atatürk Olympic Stadium in Istanbul. 65000 audiences at the stadium and hundreds of millions of fans worldwide were about to witness a soccer game that would be later called the <strong>Miracle of Istanbul</strong>. The full-of-talent team AC Milan first took the lead within the first minute by their captain Maldini. They further scored two more goals before half-time, making it a 3-0 lead. Rumors said that the Milan team opened bottles of champagnes in the locker room during the half-time break to celebrate their soon-to-be 2nd champions league title in three years. However, in the second half Liverpool launched a comeback and scored 3 goals in a dramatic six-minute spell to level the score at 3–3, and beat Milan 3-2 in the brutal penalty shoot-out stage. The English commentator said:“If this doesn’t prove fate exists, then nothing will” at the end of the game. To be sure, this epic comeback defies any words that try to describe it, but I will try to use visualizations to do this job and more importantly, try to figure out how the comeback happened.</p><h3 id="the-underdog">The underdog</h3><p>The Liverpool captain Steven Gerrard described his team as the underdog before the match, compared to the all-star Milan side, and he was right. According to data from the transfermarkt.co.uk,</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1"># get the data for the miracle of istanbul</span><span class="w">
</span><span class="n">Matches</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">FreeMatches</span><span class="p">(</span><span class="n">FreeCompetitions</span><span class="p">())</span><span class="w">
</span><span class="n">istanbul</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">get.matchFree</span><span class="p">(</span><span class="n">Matches</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="n">Matches</span><span class="o">$</span><span class="n">match_id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2302764</span><span class="p">),])</span><span class="w">
</span><span class="n">milanLineup</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">istanbul</span><span class="p">[[</span><span class="m">24</span><span class="p">]][[</span><span class="m">1</span><span class="p">]]</span><span class="o">$</span><span class="n">player.name</span><span class="w">
</span><span class="n">liverpoolLineup</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">istanbul</span><span class="p">[[</span><span class="m">24</span><span class="p">]][[</span><span class="m">2</span><span class="p">]]</span><span class="o">$</span><span class="n">player.name</span><span class="w">
</span><span class="n">milanmv</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">13.5</span><span class="p">,</span><span class="w"> </span><span class="m">2.7</span><span class="p">,</span><span class="w"> </span><span class="m">9.0</span><span class="p">,</span><span class="w"> </span><span class="m">29.7</span><span class="p">,</span><span class="w"> </span><span class="m">2.7</span><span class="p">,</span><span class="w"> </span><span class="m">18.9</span><span class="p">,</span><span class="w"> </span><span class="m">22.5</span><span class="p">,</span><span class="w"> </span><span class="m">16.2</span><span class="p">,</span><span class="w"> </span><span class="m">23.4</span><span class="p">,</span><span class="w"> </span><span class="m">31.5</span><span class="p">,</span><span class="w"> </span><span class="m">13.5</span><span class="p">)</span><span class="w">
</span><span class="n">liverpoolmv</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">4.05</span><span class="p">,</span><span class="w"> </span><span class="m">3.6</span><span class="p">,</span><span class="w"> </span><span class="m">6.75</span><span class="p">,</span><span class="w"> </span><span class="m">6.08</span><span class="p">,</span><span class="w"> </span><span class="m">1.8</span><span class="p">,</span><span class="w"> </span><span class="m">13.5</span><span class="p">,</span><span class="w"> </span><span class="m">7.88</span><span class="p">,</span><span class="w"> </span><span class="m">27</span><span class="p">,</span><span class="w"> </span><span class="m">11.25</span><span class="p">,</span><span class="w"> </span><span class="m">11.7</span><span class="p">,</span><span class="w"> </span><span class="m">15.75</span><span class="p">)</span><span class="w">
</span><span class="n">mvSums</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Milan"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="p">),</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">milanmv</span><span class="p">),</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">liverpoolmv</span><span class="p">)))</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">RColorBrewer</span><span class="p">)</span><span class="w">
</span><span class="n">coul</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">suppressWarnings</span><span class="p">(</span><span class="n">brewer.pal</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="s2">"Set2"</span><span class="p">))</span><span class="w"> 
</span><span class="n">barplot</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="n">mvSums</span><span class="o">$</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">names</span><span class="o">=</span><span class="n">mvSums</span><span class="o">$</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="o">=</span><span class="n">coul</span><span class="p">,</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Market value of Starting XI"</span><span class="p">,</span><span class="w"> </span><span class="n">sub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"184M £ vs 109M £"</span><span class="p">,</span><span class="w"> </span><span class="n">ylab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"in million pounds"</span><span class="p">,</span><span class="w"> </span><span class="n">font.sub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-3-1.png" alt="" /></p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="n">mv</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">milanLineup</span><span class="p">,</span><span class="w"> </span><span class="n">liverpoolLineup</span><span class="p">),</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">milanmv</span><span class="p">,</span><span class="w"> </span><span class="n">liverpoolmv</span><span class="p">))</span><span class="w">
</span><span class="n">mvtop10</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">head</span><span class="p">(</span><span class="n">mv</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="o">-</span><span class="n">mv</span><span class="o">$</span><span class="n">value</span><span class="p">),</span><span class="w"> </span><span class="p">],</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">forcats</span><span class="p">)</span><span class="w">
</span><span class="n">mvtop10</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fct_reorder</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">ggplot</span><span class="p">(</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">value</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">stat</span><span class="o">=</span><span class="s2">"identity"</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="o">=</span><span class="s2">"#f68060"</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="o">=</span><span class="m">.6</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="o">=</span><span class="m">.4</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">coord_flip</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">xlab</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">theme_bw</span><span class="p">()</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-3-2.png" alt="" /> we can see that the market value of Milan’s starting XI is significantly higher than Liverpool’s. Individually, Milan’s players took 8 places out of the top 10 highest market value players of the joint teams. The captain Steven Gerrard and the striker Baros are the 2 exceptions for Liverpool.</p><p>After setting the stage, let us go to the actual match.</p><h2 id="the-data">The Data</h2><h3 id="description">Description</h3><p>The dataset comes from the open-source github repository of the soccer data analytic company <em>statsbomb</em>. They make public 878 datasets in JSON format, one per game, including this one. Every dataset contains thousands of events, each event is characterized by about 100 or more variables that describe the event.</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">dim</span><span class="p">(</span><span class="n">istanbul</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>## [1] 4648  126
</pre></table></code></div></div><p>The dataset that records events about the miracle of Istanbul has 4648 events, each is described by 126 variables.</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">head</span><span class="p">(</span><span class="n">colnames</span><span class="p">(</span><span class="n">istanbul</span><span class="p">),</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>##  [1] "id"             "index"          "period"         "timestamp"     
##  [5] "minute"         "second"         "possession"     "duration"      
##  [9] "related_events" "location"
</pre></table></code></div></div><p>The above shows the first 10 variables. The first variable <code class="language-plaintext highlighter-rouge">id</code> is the unique identifier of each event; <code class="language-plaintext highlighter-rouge">period</code> denotes which time period this event occurs (eg. 1 = the first half); <code class="language-plaintext highlighter-rouge">timestamp</code> records the exact time of each event; <code class="language-plaintext highlighter-rouge">location</code> is another important variable that records the coordinate information of the event. An example event therefore would be: player x at time 00:31:52.716 passes the ball at the pitch coordinate (24, 40) at mid-height with angle y…. As I go forward, we will use and visualize more interesting variables.</p><h3 id="characteristics-of-the-data">Characteristics of the data</h3><ul><li>The dataset is really sparse (lots of NULL or NA values). This makes sense, because at one time point only one player is able to make one action. For example, Variable <code class="language-plaintext highlighter-rouge">dribble_nutmeg</code> is not NA if and only if some player nutmugs someone else (ouch!).</ul><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nf">length</span><span class="p">(</span><span class="n">which</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">istanbul</span><span class="o">$</span><span class="n">dribble.nutmeg</span><span class="p">)))</span><span class="w">
</span></pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>## [1] 4
</pre></table></code></div></div><p>4 nutmegs in 120 minutes (90 mins regular time plus 30 mins extra), not bad!</p><ul><li>We need to take special care of the <code class="language-plaintext highlighter-rouge">location</code> variable. The <code class="language-plaintext highlighter-rouge">location</code> denotes the pitch coordinates of each event. The coordinate is standardized as dimension 120 * 80. However, soccer pitch size varies and the Atatürk Olympic Stadium has dimension 105 meters * 68 meters. We need to scale the coordinate from the relative location to the actual meters, so that the event will show up on the correct location on the pitch I draw.</ul><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="n">location.x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">location.y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">istanbul</span><span class="p">))</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="n">nrow</span><span class="p">(</span><span class="n">istanbul</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="w"> </span><span class="nf">is.null</span><span class="p">(</span><span class="n">istanbul</span><span class="o">$</span><span class="n">location</span><span class="p">[[</span><span class="n">i</span><span class="p">]]))</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">location.x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">istanbul</span><span class="o">$</span><span class="n">location</span><span class="p">[[</span><span class="n">i</span><span class="p">]][</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">105</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">120</span><span class="w">
    </span><span class="n">location.y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">istanbul</span><span class="o">$</span><span class="n">location</span><span class="p">[[</span><span class="n">i</span><span class="p">]][</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">68</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">80</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="n">istanbul</span><span class="o">$</span><span class="n">location.x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">location.x</span><span class="w">
</span><span class="n">istanbul</span><span class="o">$</span><span class="n">location.y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">location.y</span><span class="w">
</span></pre></table></code></div></div><h2 id="timeline-of-the-match">Timeline of the match</h2><p>To figure out how the game evolves, we need to know the milestones of the match. The milestones of a match are the key events, and according to convention, including match start, goals, 1st half ends, 2nd half starts, cards, substitution, penalties.</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre><span class="c1"># get the goals and penalties  </span><span class="w">
</span><span class="n">goalEvents</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">istanbul</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="n">istanbul</span><span class="o">$</span><span class="n">shot.outcome.id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">97</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">istanbul</span><span class="o">$</span><span class="n">shot.type.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Penalty"</span><span class="p">),</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="c1"># get the subs</span><span class="w">
</span><span class="n">subEvents</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">istanbul</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">istanbul</span><span class="o">$</span><span class="n">substitution.outcome.name</span><span class="p">)),</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="c1"># get the cards </span><span class="w">
</span><span class="n">cardEvents</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">istanbul</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">istanbul</span><span class="o">$</span><span class="n">foul_committed.card.name</span><span class="p">)),</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="n">keyEvents</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rbind</span><span class="p">(</span><span class="n">goalEvents</span><span class="p">,</span><span class="w"> </span><span class="n">subEvents</span><span class="p">,</span><span class="w"> </span><span class="n">cardEvents</span><span class="p">)</span><span class="w">
</span><span class="c1"># Format the data to conform to timevis </span><span class="w">
</span><span class="n">contents</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"First half"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Second half"</span><span class="p">,</span><span class="w"> </span><span class="s2">"1st half extra"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2nd half extra"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Penalty shootout"</span><span class="p">)</span><span class="w">
</span><span class="n">contents</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span><span class="w"> </span><span class="s2">"yellow card"</span><span class="p">,</span><span class="w"> </span><span class="s2">"yellow card"</span><span class="p">)</span><span class="w">
</span><span class="n">contents</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span><span class="w"> </span><span class="s2">"Kewell out, Smicer in"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Finnan out, Hamann in"</span><span class="p">,</span><span class="w"> </span><span class="s2">"3-1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"3-2"</span><span class="p">,</span><span class="w"> </span><span class="s2">" 3-3"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Baros out, Cisse in"</span><span class="p">,</span><span class="w"> </span><span class="s2">"O"</span><span class="p">,</span><span class="s2">"O"</span><span class="p">,</span><span class="w"> </span><span class="s2">"X"</span><span class="p">,</span><span class="s2">"O"</span><span class="p">)</span><span class="w">
</span><span class="n">contents</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span><span class="w"> </span><span class="s2">"1-0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2-0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"3-0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Crespo out, Tomasson in"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Seedorf out, Serginho in"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Gattuso out, Rui Costa in"</span><span class="p">,</span><span class="w"> </span><span class="s2">"X"</span><span class="p">,</span><span class="w">  </span><span class="s2">"X"</span><span class="p">,</span><span class="w"> </span><span class="s2">"O"</span><span class="p">,</span><span class="w">  </span><span class="s2">"O"</span><span class="p">,</span><span class="w">  </span><span class="s2">"X"</span><span class="p">)</span><span class="w">
</span><span class="n">contents</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span><span class="w"> </span><span class="s2">"Timeout"</span><span class="p">)</span><span class="w">
</span><span class="n">start</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"2005-5-25 19:45:00"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 20:45:00"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 21:30:00"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 21:45:00"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:00:00"</span><span class="p">)</span><span class="w">
</span><span class="c1"># liverpool</span><span class="w">
</span><span class="n">start</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 21:15:28"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 21:19:58"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 20:07:00"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 20:45:00"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 20:53:04"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 20:55:02"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 20:59:52"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 21:24:28"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:00:50"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:02:37"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:04:11"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:05:44"</span><span class="p">)</span><span class="w">
</span><span class="c1"># Milan</span><span class="w">
</span><span class="n">start</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 19:45:51"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 20:23:12"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 20:27:57"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 21:24:50"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 21:25:05"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 21:51:20"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:00:02"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:01:40"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:03:17"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:05:03"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:06:24"</span><span class="p">)</span><span class="w">
</span><span class="n">start</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 20:30:00"</span><span class="p">)</span><span class="w">
</span><span class="n">end</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"2005-5-25 20:30:00"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 21:30:00"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 21:45:00"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:00:00"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2005-5-25 22:07:00"</span><span class="p">,</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="m">23</span><span class="p">),</span><span class="w"> </span><span class="s2">"2005-5-25 20:45:00"</span><span class="p">)</span><span class="w">
</span><span class="n">group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="nf">rep</span><span class="p">(</span><span class="s2">"time"</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">),</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="s2">"Liverpool"</span><span class="p">,</span><span class="w"> </span><span class="m">12</span><span class="p">),</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="s2">"Milan"</span><span class="p">,</span><span class="w"> </span><span class="m">11</span><span class="p">),</span><span class="w"> </span><span class="kc">NA</span><span class="p">)</span><span class="w">
</span><span class="n">style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="nf">rep</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">),</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="s2">"color:yellow;"</span><span class="p">,</span><span class="m">2</span><span class="p">),</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">),</span><span class="w"> </span><span class="s2">"color:red;"</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">),</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="s2">"color:red;"</span><span class="p">,</span><span class="m">2</span><span class="p">),</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="s2">"color:red;"</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">)</span><span class="w">
</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">contents</span><span class="p">,</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">end</span><span class="p">,</span><span class="w"> </span><span class="n">group</span><span class="p">,</span><span class="w"> </span><span class="n">style</span><span class="p">)</span><span class="w">

</span><span class="n">timevisDataGroups</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="w">
  </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"time"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Milan"</span><span class="p">),</span><span class="w">
  </span><span class="n">content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Time"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Milan"</span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">timevis</span><span class="p">)</span><span class="w">
</span><span class="n">timevis</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">timevisDataGroups</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/timeline.png" alt="" /></p><p>To summarize the timeline that we see above. In the first half, Milan scored immediately when the game began, and scored two more goals towards the end of the first half. On the other hand, Liverpool made a substitute because of injury. Before the start of the 2nd half, Liverpool was already 3-0 down and used one (out of total 3) substitution involuntarily. At the beginning of the 2nd half, Liverpool made yet another substitution. This substitution is due to the tactical consideration by the Liverpool manager, trying to turn things around, and it did. About 10 minutes later, Liverpool score their first goal, making it 3-1, and in this 6 minutes spell, they score three goals in total, levelling the score to 3-3. Both teams did not score in the later parts of the game, and Liverpool beat Milan 3-2 in Penalty shootout (the red X denotes penalty missing or being saved by the goalkeeper).</p><p>By seeing this timeline plot, all the key events are laid out clearly. Furthermore, we can immediately gain insights towards our question, which is, how the miracle happened:</p><ul><li>The three comeback goals were scored in 6 minutes! What happened in those 6 minutes?<li>The distribution of goals are quite “even”, in that Milan scored 3 in the first half and Liverpool scored 3 in the second half. Why that is the case?</ul><p>Another thing that stands out from the timeline graph is that there were only 2 yellow cards (all from Liverpool) and 0 red card in the game. That is extremely rare for a soccer game, especially for the Champions League final, the biggest game of the year. It shows how both teams were focusing on playing the game actively, not on playing the game passively (by fouling a lot to stop the other team’s play). It is truly a smooth and high quality game, and dramatic.</p><h2 id="heaven-or-hell">Heaven or Hell</h2><p>As the timeline suggested, we see a distinction between the 1st half and the 2nd half. Each team scored three goals and the other team scored nothing. Specifically, the 1st half is the heaven for Milan, the hell for Liverpool; the 2nd half is exactly the reverse of the 1st half. Can we visualize the difference, the difference between heaven and hell?</p><h3 id="shots">Shots</h3><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tibble</span><span class="o">::</span><span class="n">as_tibble</span><span class="p">(</span><span class="n">istanbul</span><span class="p">)</span><span class="w">
</span><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">46</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">soccerShotmap</span><span class="p">(</span><span class="n">theme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"dark"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-9-1.png" alt="" /></p><p>As we can see, in the 1st half, Milan made 8 shots (8 dots on the pic above) and Liverpool made 5. However, most of the shots by Milan (6 out of 8) were inside the box, whereas Liverpool only had 2.</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">minute</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">45</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">90</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">soccerShotmap</span><span class="p">(</span><span class="n">theme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"dark"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-10-1.png" alt="" /> In the 2nd half, we’d expect that Liverpool dominates the shots and shots in the box. On the contrary, Milan still dominates the number of shots and shots in the box. Liverpool made only 2 shots inside the box and they all made it into the net, and Liverpool also scored a long-ranger. However, Milan attempted 6 shots inside the box and 6 more outside the box, none of them made it.</p><p>Let’s see the comparison between shots made by both teams in the extra time.</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">minute</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">90</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">120</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">soccerShotmap</span><span class="p">(</span><span class="n">theme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"dark"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-11-1.png" alt="" /> Surprisingly (or not so surprisingly after seeing the shots made in the 2nd half of the game), Liverpool made no attempts and Milan made 7 more shots, 3 of them inside the box with 1 near the post of the goal (so close!) and yet, Milan scored nothing.</p><h3 id="passes">Passes</h3><p>Passes are a essential part of a soccer game. By looking at the locations of the passes (both the starting locations and the end locations), we can also see the positions of the ball and the players.</p><h4 id="1st-half">1st half</h4><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"AC Milan"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">24</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">soccerPassmap</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"lightblue"</span><span class="p">,</span><span class="w"> </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w">
                </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Milan's passing map in the 1st half"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-12-1.png" alt="" /> <em>picture 1</em></p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"AC Milan"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">24</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">soccerPassmap</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"lightblue"</span><span class="p">,</span><span class="w"> </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w">
                </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Milan's passing map in the 1st half (25' onwards)"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-12-2.png" alt="" /> <em>picture 2</em></p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">soccerPassmap</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"lightblue"</span><span class="p">,</span><span class="w"> </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w">
                </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Liverpool's passing map in the 1st half"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-12-3.png" alt="" /> <em>picture 3</em></p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">soccerPassmap</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"lightblue"</span><span class="p">,</span><span class="w"> </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w">
                </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Liverpool's passing map in the 1st half (25' onwards)"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-12-4.png" alt="" /> <em>picture 4</em></p><p>We break the 1st half into two halves. The <strong>picture 1</strong> shows the passing map of AC Milan in the first 24 minutes, with Pirlo being the center of the passing map (the biggest blue dot in the map), Milan’s transition (from attack to defense and vice versa) depended on him. Another thing to notice is that one of the Milan’s forward, Crespo, was not really involved in the game. The <strong>picture 2</strong> is the passing map of Milan in the second half of the 1st half. Compared to the first picture, Milan’s formation retrieved to their goal. For example, in the first 24 minutes, Maldini (left back), Gattuso, Seedorf, were standing in front of the Pirlo; they were behind Pirlo in the later half of the 1st half. I would guess the reason was due to the increase in aggressiveness of Liverpool, as well as their own strategy of contracting their defensive lines and playing counterattack, since they led 1-0 as early as 1 minute into the game. And that strategy was fantastic! They scored two more goals on counter attack at 39’ and 44’ when Liverpool tried really hard attacking (since they were 1-0 behind). The scorer of both goals is Crespo, the man who were not “involved” in terms of passing in the first 24 minutes, and he became lethal in the second part.</p><p>The <strong>picture 3 and 4</strong> tell the Liverpool’s part of the story in the 1st half. The first thing to notice is that Kewell was out and Smicer was in for him (Kewell was in the 3rd pic but not in the 4th, and Smicer the opposite) because Kewell was injured. And compared the 4th with the 3rd picture, Gerrard and Sanz were pushing forward and to the center, while the two wingers Riise and Smicer were roughly in the same position as before.</p><h4 id="the-six-minute-spell">The six minute spell</h4><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"AC Milan"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">53</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">60</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">soccerPassmap</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"lightblue"</span><span class="p">,</span><span class="w"> </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w">
                </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Milan's passing map in the 6 minute spell"</span><span class="p">,</span><span class="w"> </span><span class="n">minPass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-13-1.png" alt="" /> <em>picture 1</em></p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">passMap</span><span class="p">(</span><span class="n">is</span><span class="p">,</span><span class="w"> </span><span class="s2">"AC Milan"</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">54</span><span class="p">,</span><span class="w"> </span><span class="m">60</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-13-2.png" alt="" /> <em>picture 2</em></p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">53</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;=</span><span class="m">60</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">soccerPassmap</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"lightblue"</span><span class="p">,</span><span class="w"> </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w">
                </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Liverpool's passing map in the 6 minute spell"</span><span class="p">,</span><span class="w"> </span><span class="n">minPass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-13-3.png" alt="" /> <em>picture 3</em></p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">passMap</span><span class="p">(</span><span class="n">is</span><span class="p">,</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">54</span><span class="p">,</span><span class="w"> </span><span class="m">60</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-13-4.png" alt="" /> <em>picture 4</em></p><p>We have seen the hell for Liverpool, i.e., the first half of the game, where Milan scored an early goal and player on counter and scored two more goals while Liverpool was struggling in attacking. However, as the timeline suggests, in the second half of the game, there was a 6-minute spell where Liverpool scored 3 goals. That spell was really the heaven for Liverpool and for Liverpool’s fans. What happened? Since we are in the passing section and analyzing passes are really effective in analyzing the whole game, let’s look at all the passes happened in that spell. In the <strong>picture 1</strong>, Milan achieved 27 passes with less than 60% of them completed. Only 8 players of Milan were involved in passing the ball one or more times. Looking more closely, the <strong>picture 2</strong> indicated that the passes from defense to midfield and midfield to attack all failed (red: failure, blue: success).</p><p>On the contrary, the <strong>picture 3</strong> shows that all 10 players (excluding the goalkeeper) were involved in passing, and they achieved more than 75% passing accuracy. The <strong>picture 4</strong> shows the exact passes.</p><p>In the 1st half, the passing accuracy was 78% for Milan. What causes this decline in passing accuracy and number of passes on the Milan side, whereas Liverpool somehow maintained their passing accuracy? I then look at the defensive acts by both teams in that six minutes.</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="n">d2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">filter</span><span class="p">(</span><span class="n">type.name</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Interception"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Block"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Dispossessed"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Ball Recovery"</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">54</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">60</span><span class="p">)</span><span class="w">

</span><span class="n">soccerPitch</span><span class="p">(</span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w"> 
            </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="p">,</span><span class="w"> 
            </span><span class="n">subtitle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Defensive actions"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_point</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d2</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location.x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location.y</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">type.name</span><span class="p">),</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-14-1.png" alt="" /> <em>picture 1</em></p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="n">d2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">filter</span><span class="p">(</span><span class="n">type.name</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="w"> </span><span class="s2">"Interception"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Block"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Dispossessed"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Ball Recovery"</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"AC Milan"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">54</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">60</span><span class="p">)</span><span class="w">

</span><span class="n">soccerPitch</span><span class="p">(</span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w"> 
            </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Milan"</span><span class="p">,</span><span class="w"> 
            </span><span class="n">subtitle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Defensive actions"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_point</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d2</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location.x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location.y</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">type.name</span><span class="p">),</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-14-2.png" alt="" /> <em>picture 2</em></p><p>The <strong>picture 1</strong> is the defensive actions done by Liverpool players in 6 minutes. What is staggering is that they managed to achieve 7 ball retrievals, leading to the decline in Milan’s passing accuracy. The <strong>picture 2</strong> shows the defensive actions done by Milan. The mere 1 ball retrieve hardly influenced Liverpool’s passing and possession.</p><h3 id="position">Position</h3><p>We have seen some visual information about the position of the players in the passing maps earlier, to the point that we saw some deliberate position shifts from the Milan side in the 1st half when they contracted their defense lines. Through the viualizations below, we can see more about the shifts in positions in terms of the whole team (i.e. shifts in team formation) and individual key players.</p><h4 id="1st-half-1">1st half</h4><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">location.x</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"AC Milan"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">soccerPositionMap</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"player.name"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"location.x"</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"location.y"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">fill1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"blue"</span><span class="p">,</span><span class="w"> </span><span class="n">theme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"grass"</span><span class="p">,</span><span class="w"> </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AC Milan"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">subtitle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Average position (1st half)"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-15-1.png" alt="" /> <em>picture 1</em></p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">location.x</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">25</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">soccerPositionMap</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"player.name"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"location.x"</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"location.y"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">fill1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"blue"</span><span class="p">,</span><span class="w"> </span><span class="n">theme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"grass"</span><span class="p">,</span><span class="w"> </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">subtitle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Average position (1st half)"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-15-2.png" alt="" /> <em>picture 2</em></p><p>The <strong>picture 1</strong> is the average position of the Milan in the 1st half. The average position is defined as the average coordinates of players when they take any actions, not only the passing ones. As we can see, the Milan’s formation were really tight in the center of the midfield. In addition to the 4 midfielders, one of the forwards Crespo was close to midfield as well. And they were close together in the center for a reason (as explained below).</p><p>In the <strong>picture 2</strong>, Liverpool’s formation in the 1st half was rather scattered acrossthe width of the field. This was due to their tactics of playing wide on the sides. Gerrard and Olano were together as a pair, sitting in the midfield. However, their attacks on the sides were not going very well, so Milan decided not to put too many players on the sides (indicated by the 1st pic) and focused their attacks and later their counter attacks in the center.</p><h4 id="first-15-mins-at-2nd-half">first 15 mins at 2nd half</h4><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">filter</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">location.x</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"AC Milan"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">60</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">soccerPositionMap</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"player.name"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"location.x"</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"location.y"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">fill1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"blue"</span><span class="p">,</span><span class="w"> </span><span class="n">theme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"grass"</span><span class="p">,</span><span class="w"> </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AC Milan"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">subtitle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Average position (2nd half)"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-16-1.png" alt="" /> <em>picture 1</em></p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">is</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">location.x</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">team.name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">60</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">soccerPositionMap</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"player.name"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"location.x"</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"location.y"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">fill1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"blue"</span><span class="p">,</span><span class="w"> </span><span class="n">theme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"grass"</span><span class="p">,</span><span class="w"> </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Liverpool"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">subtitle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Average position (2nd half)"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/blog_imgs/2021-03-04-the-miracle-of-istanbul/unnamed-chunk-16-2.png" alt="" /> <em>picture 2</em></p><p>With 3-0 down, Liverpool took right back Finnan down (therefore forfeiting the attacking on the sides tactics) and put Hamman up immediately in the beginning of the 2nd half, and the result was astonishing! In the <strong>picture 2</strong>, Hamann took the position of where Gerrard was in the 1st half, and freed Gerrard. By sacrificing the right back, the Liverpool squeezed their formation towards the center. Gerrard, together with Sanz and Baros, were constantly charging to the Milan’s box carefree, since Hamann took care of his defensive duties. And Boom! Gerrard scored the first goal, a header inside the box, and created a penalty (later converted to the 3rd goal).</p><h2 id="conclusion">Conclusion</h2><p>Some may say that there is no need to visualize a soccer match, since it is a visual art/sport in itself. I have to agree since I am a soccer fan and have had so much joy and pain watching the games. It is especially hard to try to visualize a miracle. However, I did it anyway because an EDA process on a soccer match dataset can achieve the following things:</p><ol><li>A visual summary. In normal games, audiences see the motions of players in terms of motions of pictures, and they do not have good enough memory to remember everything and do not have time to summarize those information, as they are concentrated on the game itself. After the match, audiences will see lots of statistics about the game, such as the number of shots, the possession rate, number of passes, pass accuracy, etc, and they do not make much sense and they are not even comparable. A 65% possession rate in a game by a side is not the same thing as another team having 65% in another game. Go ask Barcelona fans. Their team used to have 65% possession and ended up winning all trophies, and now win nothing with the same possession rate. Visualizations like this can combine the visual part with the summary part, providing fans with a more immersive and insightful perspective towards understanding the game.<li>A good starting point for models about soccer game. As the advance of data science, models about soccer games are in dire need. A prominent example would be the model to predict expected goals given the data about soccer games. This EDA process is great for:<ol><li>See the data and find the characteristics of the data. In my example, it would be a lot of None values in the dataset and incompatible field dimension that I need to manually change.<li>Visualize the key events that may lead to goals.<li>Find out directions that may worth pursuing. I find out the 6 minute Liverpool spell and think this may be the direction to look further into.</ol></ol><p>Main lessons learnt: It is no doubt a miracle, because:</p><ol><li>Super dramatic. Liverpool dominated the game for only 6 minutes, and ended up scoring three goals. Milan took the show for 114 minutes, including 7 shots in extra time, and they failed to score any after the 1st half. The inefficiency in shooting influenced their mindset in the final penality shoot out, missing 3 out of 5. And Dudek’s (Liverpool’s goalkeeper) double save from Shevchenko in the 117th minute was voted the greatest Champions League moment of all time.<li>Some reasons behind the comeback drama. 6 minutes spell because of the introduce of Hamann that freed Gerrard to attack. Milan’s success in the 1st half was also due to the formation factor, where Milan was tight in the center and Liverpool scattered.<li>Human factor. The hard part to visualize. The psychological change of the Milan side as they went from ecstasy to doubt, and to fear. Their change in mindset when they repeatedly attack but scored nothing. On the other side, Gerrard and his influence on the whole team.</ol><h2 id="credits">Credits</h2><h3 id="data">Data</h3><ul><li>Statsbomb</ul><h3 id="visualization-package">Visualization package</h3><ul><li>soccermatics<li>ggplot2</ul><h2 id="my-working-session">My working session</h2><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">sessionInfo</span><span class="p">()</span><span class="w">
</span></pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre>## R version 4.1.0 (2021-05-18)
## Platform: x86_64-apple-darwin20.4.0 (64-bit)
## Running under: macOS Big Sur 11.4
## 
## Matrix products: default
## BLAS:   /usr/local/Cellar/openblas/0.3.15_1/lib/libopenblasp-r0.3.15.dylib
## LAPACK: /usr/local/Cellar/r/4.1.0/lib/R/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] parallel  stats     graphics  grDevices utils     datasets  methods  
## [8] base     
## 
## other attached packages:
##  [1] forcats_0.5.1      RColorBrewer_1.1-2 soccermatics_0.9.4 StatsBombR_0.1.0  
##  [5] tidyr_1.1.3        sp_1.4-5           purrr_0.3.4        jsonlite_1.7.2    
##  [9] httr_1.4.2         doParallel_1.0.16  iterators_1.0.13   foreach_1.5.1     
## [13] RCurl_1.98-1.3     rvest_1.0.0        tibble_3.1.2       stringr_1.4.0     
## [17] stringi_1.6.2      dplyr_1.0.6        ggplot2_3.3.3     
## 
## loaded via a namespace (and not attached):
##  [1] zoo_1.8-9         tidyselect_1.1.1  xfun_0.23         lattice_0.20-44  
##  [5] colorspace_2.0-1  vctrs_0.3.8       generics_0.1.0    htmltools_0.5.1.1
##  [9] yaml_2.2.1        utf8_1.2.1        rlang_0.4.11      R.oo_1.24.0      
## [13] pillar_1.6.1      glue_1.4.2        withr_2.4.2       R.utils_2.10.1   
## [17] tweenr_1.0.2      plyr_1.8.6        lifecycle_1.0.0   munsell_0.5.0    
## [21] gtable_0.3.0      SDMTools_1.1-221  R.methodsS3_1.8.1 codetools_0.2-18 
## [25] evaluate_0.14     knitr_1.33        fansi_0.5.0       xts_0.12.1       
## [29] Rcpp_1.0.6        scales_1.1.1      farver_2.1.0      ggforce_0.3.3    
## [33] digest_0.6.27     ggrepel_0.9.1     polyclip_1.10-0   grid_4.1.0       
## [37] cowplot_1.1.1     tools_4.1.0       bitops_1.0-7      magrittr_2.0.1   
## [41] crayon_1.4.1      pkgconfig_2.0.3   ellipsis_0.3.2    MASS_7.3-54      
## [45] xml2_1.3.2        rmarkdown_2.8     R6_2.5.0          compiler_4.1.0
</pre></table></code></div></div><h2 id="source-code">source code</h2><ul><li><a href="https://github.com/Allanware/Allanware.github.io/blob/master/_source/2021-03-04-The-Miracle-of-Istanbul.Rmd">https://github.com/Allanware/Allanware.github.io/blob/master/_source/2021-03-04-The-Miracle-of-Istanbul.Rmd</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/soccer/" class="post-tag no-text-decoration" >soccer</a> <a href="/tags/football/" class="post-tag no-text-decoration" >football</a> <a href="/tags/visualization/" class="post-tag no-text-decoration" >visualization</a> <a href="/tags/r/" class="post-tag no-text-decoration" >r</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=The Miracle of Istanbul - Wenxuan Zhao&url=https://allanware.github.io/posts/The-Miracle-of-Istanbul/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=The Miracle of Istanbul - Wenxuan Zhao&u=https://allanware.github.io/posts/The-Miracle-of-Istanbul/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=The Miracle of Istanbul - Wenxuan Zhao&url=https://allanware.github.io/posts/The-Miracle-of-Istanbul/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/The-Miracle-of-Istanbul/">The Miracle of Istanbul</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/football/">football</a> <a class="post-tag" href="/tags/r/">r</a> <a class="post-tag" href="/tags/r%E8%AF%AD%E8%A8%80/">R语言</a> <a class="post-tag" href="/tags/soccer/">soccer</a> <a class="post-tag" href="/tags/visualization/">visualization</a> <a class="post-tag" href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/">可视化</a> <a class="post-tag" href="/tags/%E8%B6%B3%E7%90%83/">足球</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/zh/posts/%E4%BC%8A%E6%96%AF%E5%9D%A6%E5%B8%83%E5%B0%94%E5%A5%87%E8%BF%B9/"><div class="card-body"> <span class="timeago small" > Jun 10 <i class="unloaded">2021-06-10T01:24:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>伊斯坦布尔奇迹</h3><div class="text-muted small"><p> 引言 2005年5月25日，欧洲冠军联赛决赛在伊斯坦布尔的阿塔图尔克奥林匹克体育场举行。 体育场的 65000 名观众和全球数亿球迷即将见证一场后来被称为伊斯坦布尔奇迹的足球比赛。 才华横溢的AC米兰队在第一分钟就由队长马尔蒂尼先拔头筹；半场结束前，他们又进了两个球，直到 3-0 领先。 有传言说，米兰队在中场休息时就在更衣室里开香槟以庆祝他们即将在三年内第二次夺得欧冠冠军。 然而，下半场利...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <span class="btn btn-outline-primary disabled" prompt="Older"><p>-</p></span> <a href="/zh/posts/%E4%BC%8A%E6%96%AF%E5%9D%A6%E5%B8%83%E5%B0%94%E5%A5%87%E8%BF%B9/" class="btn btn-outline-primary" prompt="Newer"><p>伊斯坦布尔奇迹</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//allanware-github-io.disqus.com/embed.js', disqusConfig: function() { this.page.title = 'The Miracle of Istanbul'; this.page.url = 'https://allanware.github.io/posts/The-Miracle-of-Istanbul/'; this.page.identifier = '/posts/The-Miracle-of-Istanbul/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://github.com/Allanware">Wenxuan Zhao</a>.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/football/">football</a> <a class="post-tag" href="/tags/r/">r</a> <a class="post-tag" href="/tags/r%E8%AF%AD%E8%A8%80/">R语言</a> <a class="post-tag" href="/tags/soccer/">soccer</a> <a class="post-tag" href="/tags/visualization/">visualization</a> <a class="post-tag" href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/">可视化</a> <a class="post-tag" href="/tags/%E8%B6%B3%E7%90%83/">足球</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://allanware.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
